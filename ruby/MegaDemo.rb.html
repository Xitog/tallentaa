<html>
<head>
<title>Untitled</title>
</head>
<!-- Generated by SynEdit HTML exporter -->
<body text="#000000" bgcolor="#FFFFFF">
<pre>
<code><span style="font-size:14;">
<font color="#0000A0"><b>BEGIN </b></font>{
  <b>puts </b><font color="#800080">'Debut'
</font>}

<font color="#0000A0"><b>END </b></font>{ <font color="#008000"><i># s'exécute même si y'a des erreurs, traitement des erreurs (affichage par défaut) après
  </i></font><b>puts </b><font color="#800080">'Fin'
</font>}

<b>puts </b><font color="#800080">'Hello World'

</font><font color="#008000"><i># Variable prédéfini
</i></font><b>puts </b><font color="#800080">'fichier : '</font>+$<font color="#008080">FILENAME
</font><b>puts </b><font color="#800080">'fichier courant : '</font>+<font color="#0000A0"><b>__FILE__
</b></font><b>puts </b><font color="#800080">'SAFE : '</font>+$<font color="#008080">SAFE</font>.<b>to_s </b><font color="#008000"><i># ne peut être réduite, seulement augmentée

# type de variable
# globale
</i></font>$<font color="#008080">globo </font>= 2
<font color="#008000"><i># normal
</i></font><font color="#008080">globo </font>= 3
<font color="#008000"><i># D'instance : @var
# De classe : @@var

# type de base
</i></font><font color="#008080">my_array </font>= [1,2,3]
<font color="#008080">my_dict </font>= { 1 =&gt; <font color="#800080">'pipo'</font>, 2 =&gt; <font color="#800080">'cat'</font>}

<font color="#008000"><i># Bloc
</i></font><font color="#0000A0"><b>begin
  </b></font><b>puts </b><font color="#800080">'Hello Block'
</font><font color="#0000A0"><b>end

</b></font><font color="#008000"><i># Itération
</i></font><font color="#008080">a </font>= 5
<font color="#0000A0"><b>while </b></font><font color="#008080">a </font>&gt; 0
  <b>print </b><font color="#008080">a</font>.<b>to_s</b>+<font color="#800080">','
  </font><font color="#008080">a-</font>=1
<font color="#0000A0"><b>end
</b></font><b>puts

</b><font color="#0000A0"><b>until </b></font><font color="#008080">a </font>== 5
  <b>print </b><font color="#008080">a</font>.<b>to_s</b>+<font color="#800080">','
  </font><font color="#008080">a</font>+=1
<font color="#0000A0"><b>end
</b></font><b>puts

</b><font color="#008080">a</font>+=1 <font color="#0000A0"><b>while </b></font><font color="#008080">a </font>&gt; 7
<font color="#0000A0"><b>begin
  </b></font><font color="#008080">a</font>+=1
  <b>print </b><font color="#008080">a</font>.<b>to_s</b>+<font color="#800080">','
</font><font color="#0000A0"><b>end while </b></font><font color="#008080">a </font>&gt; 10
<b>puts

</b><font color="#0000A0"><b>for </b></font><font color="#008080">a </font><font color="#0000A0"><b>in </b></font>1..4 <font color="#008000"><i># 4 inclus
  </i></font><b>print </b><font color="#008080">a</font>.<b>to_s</b>+<font color="#800080">','
</font><font color="#0000A0"><b>end
</b></font><b>puts

</b><font color="#0000A0"><b>for </b></font><font color="#008080">a </font><font color="#0000A0"><b>in </b></font>1...4 <font color="#008000"><i># 4 non inclus
  </i></font><b>print </b><font color="#008080">a</font>.<b>to_s</b>+<font color="#800080">','
</font><font color="#0000A0"><b>end
</b></font><b>puts

</b>[1,2].<b>each </b>{ |<font color="#008080">i</font>|
  <b>puts </b><font color="#800080">'Holà : '</font>+<font color="#008080">i</font>.<b>to_s
</b>}

<font color="#008080">a </font>= 0

<font color="#008000"><i># break, redo, next &amp; retry peuvent aussi foutre la merde dans les boucles !

# Sélection
</i></font><font color="#0000A0"><b>if </b></font><font color="#008080">a </font>== 0
  <b>puts </b><font color="#800080">'a == '</font>+0.<b>to_s
</b><font color="#0000A0"><b>elsif </b></font><font color="#008080">a </font>== 1
  <b>puts </b><font color="#800080">'a == 1'
</font><font color="#0000A0"><b>else
  </b></font><b>puts </b><font color="#800080">'a == '</font>+<font color="#008080">a</font>.<b>to_s
</b><font color="#0000A0"><b>end

unless </b></font><font color="#008080">a!</font>= 0
  <b>puts </b><font color="#800080">'a == 0'
</font><font color="#0000A0"><b>else
  </b></font><b>puts </b><font color="#800080">'a != 0'
</font><font color="#0000A0"><b>end

</b></font><b>puts </b><font color="#800080">'Pipo' </font><font color="#0000A0"><b>if </b></font><font color="#008080">a </font>== 0

<font color="#008080">b </font>= <font color="#800080">&quot;pipo&quot;
</font><font color="#0000A0"><b>case </b></font><font color="#008080">b
  </font><font color="#0000A0"><b>when </b></font><font color="#800080">&quot;pipo&quot;
    </font><b>puts </b><font color="#800080">'pipo'
  </font><font color="#0000A0"><b>when </b></font><font color="#800080">&quot;zorba&quot;
    </font><b>puts </b><font color="#800080">'zorba'
  </font><font color="#0000A0"><b>else
    </b></font><b>puts </b><font color="#800080">'default'
</font><font color="#0000A0"><b>end

</b></font><font color="#008000"><i># Définition d'une classe et de méthode et d'accesseur
</i></font><font color="#0000A0"><b>class </b></font><font color="#008080">Pipo
  </font><b>attr_reader </b><font color="#008080">:</font><b>var
  
  </b><font color="#0000A0"><b>def </b></font><font color="#008080">Pipo</font>.<font color="#008080">static_hello
    </font><b>puts </b><font color="#800080">'Hello Static'
    </font>@@<font color="#008080">stat_var </font>= 3
  <font color="#0000A0"><b>end
  
  def </b></font><font color="#008080">instance_hello
    </font><b>puts </b><font color="#800080">'Hello Instance'
    </font>@<b>var </b>= 5
  <font color="#0000A0"><b>end
  
  def self</b></font>.<font color="#008080">stat_var </font><font color="#008000"><i># Attention : self réfère à Pipo
    </i></font>@@<font color="#008080">stat_var </font><font color="#008000"><i># Le dernier statement est automatiquement retourné (Nil sinon)
  </i></font><font color="#0000A0"><b>end
  
  def self</b></font>.<font color="#008080">stat_var</font>=(<font color="#008080">val</font>)
    @@<font color="#008080">stat_var </font>= <font color="#008080">val
  </font><font color="#0000A0"><b>end
  
  def </b></font><font color="#008080">pipo</font>(<font color="#008080">a</font>=5,*<font color="#008080">b</font>) <font color="#008000"><i># *b peut être nul
    </i></font><b>puts </b><font color="#008080">a
    </font><b>puts </b><font color="#008080">b </font><font color="#008000"><i># puts d'un tableau affiche à la ligne chacun des éléments
  </i></font><font color="#0000A0"><b>end
  
  def </b></font><font color="#008080">pipo2</font>(<font color="#008080">a</font>,&amp;<font color="#008080">c</font>) <font color="#008000"><i># &amp;c représente un bloc et peu être nul. Attention : encadré le yield avec block_given
    </i></font><font color="#0000A0"><b>if </b></font><font color="#008080">block_given?
      </font><font color="#0000A0"><b>yield </b></font><font color="#008080">a </font><font color="#008000"><i># sinon LocalJumpError (no block given)
    </i></font><font color="#0000A0"><b>end
  end
  
  def </b></font><font color="#008080">pipo3</font>(<font color="#008080">a</font>,<font color="#008080">b</font>,<font color="#008080">c</font>,<font color="#008080">d</font>)
    <b>puts </b>[<font color="#008080">a</font>,<font color="#008080">b</font>,<font color="#008080">c</font>,<font color="#008080">d</font>]
  <font color="#0000A0"><b>end
  
  def </b></font><font color="#008080">small_pipo</font>(<font color="#008080">a</font>)
    <b>puts </b><font color="#800080">&quot;That's small pipo ! a = &quot;</font>+<font color="#008080">a</font>.<b>to_s
  </b><font color="#0000A0"><b>end

end

</b></font><font color="#008000"><i># Appel de méthode
</i></font><font color="#008080">Pipo</font>.<font color="#008080">static_hello
Pipo::static_hello
p </font>= <font color="#008080">Pipo</font>.<b>new
</b><font color="#008080">p</font>.<font color="#008080">instance_hello
</font><b>puts </b><font color="#008080">p</font>.<b>var
</b><font color="#008000"><i># Variables statiques et accesseurs
</i></font><b>puts </b><font color="#800080">'Pipo.static_var = '</font>+<font color="#008080">Pipo</font>.<font color="#008080">stat_var</font>.<b>to_s
</b><font color="#008080">Pipo</font>.<font color="#008080">stat_var </font>= 22
<b>puts </b><font color="#800080">'Pipo.static_var = '</font>+<font color="#008080">Pipo</font>.<font color="#008080">stat_var</font>.<b>to_s
</b><font color="#008000"><i># Arguments zarbes et autres joyeusetés
</i></font><font color="#008080">tab </font>= [1,2,3,4]
<font color="#008080">p</font>.<font color="#008080">pipo3</font>(*<font color="#008080">tab</font>) <font color="#008000"><i># on éclate le tableau
</i></font><font color="#008080">p</font>.<font color="#008080">pipo2</font>(5) { |<font color="#008080">i</font>| <b>puts </b><font color="#800080">'b -&gt; '</font>+<font color="#008080">i</font>.<b>to_s </b>} <font color="#008000"><i># les parenthèses sont optionnelles. Ruby c fou ! mais pas ici !!!
</i></font><font color="#008080">p</font>.<font color="#008080">pipo2</font>(7)
<font color="#008000"><i># Une méthode à la place d'un bloc (on convertit)
</i></font><font color="#008080">p</font>.<font color="#008080">pipo2</font>(9,&amp;<font color="#008080">p</font>.<b>method</b>(<font color="#008080">:small_pipo</font>)) <font color="#008000"><i># 13h13 : Si Python c bien, Ruby c dingue !!!
# Une procédure à la place d'un bloc (on convertit)
</i></font><font color="#008080">myproc </font>= <b>proc </b>{ |<font color="#008080">i</font>| <b>puts </b><font color="#800080">'une petite proc ! i = '</font>+<font color="#008080">i</font>.<b>to_s </b>}
<font color="#008080">p</font>.<font color="#008080">pipo2</font>(9,&amp;<font color="#008080">myproc</font>) <font color="#008000"><i>#13h14 !
</i></font><font color="#008080">myproc</font>.<b>call</b>(3)
<font color="#008080">p</font>.<font color="#008080">pipo </font>2
<font color="#008080">p</font>.<font color="#008080">pipo </font>2, [3,4]

<font color="#008000"><i># alias
</i></font>$<font color="#008080">pipo </font>= 4
<font color="#0000A0"><b>alias </b></font>$<font color="#008080">zorba </font>$<font color="#008080">pipo
</font><b>puts </b>$<font color="#008080">zorba

</font><font color="#008000"><i># module
</i></font><font color="#0000A0"><b>module </b></font><font color="#008080">Zorba
  CONSTANTE </font>= 1
  <font color="#0000A0"><b>def </b></font><font color="#008080">Zorba</font>.<font color="#008080">m
    </font><b>puts </b><font color="#800080">&quot;Zorba.m&quot;
  </font><font color="#0000A0"><b>end
  def </b></font><font color="#008080">m2
    </font><b>puts </b><font color="#800080">&quot;Zorba.m2&quot;
  </font><font color="#0000A0"><b>end
  def </b></font><font color="#008080">m3
    </font><b>puts </b><font color="#800080">&quot;Zorba.m3&quot;
  </font><font color="#0000A0"><b>end
  </b></font><b>module_function </b><font color="#008080">:m3 </font><font color="#008000"><i># Fabication d'une COPIE pour le module (pas d'alias)
  </i></font><font color="#008080">P0</font>,<font color="#008080">P1</font>,<font color="#008080">P2 </font>= *0...3 <font color="#008000"><i># créé un tableau [0,1,2] puis l'éclate pour le répartir dans chaque var
</i></font><font color="#0000A0"><b>end
</b></font><b>puts </b><font color="#800080">'Constante du module Zorba = '</font>+<font color="#008080">Zorba::CONSTANTE</font>.<b>to_s
</b><font color="#008080">Zorba</font>.<font color="#008080">m
</font><b>puts </b><font color="#800080">'Constante P2 = '</font>+<font color="#008080">Zorba::P2</font>.<b>to_s
</b><font color="#008000"><i># Zorba.m2 -&gt; impossible m2 n'est pas available comme fonction de module
</i></font><font color="#008080">Zorba</font>.<font color="#008080">m3
</font><b>include </b><font color="#008080">Zorba
m2 </font><font color="#008000"><i># 13h28 : Je pense que quand Matz dit les mécanismes internes de Ruby sont complexes, je veux bien le croire !
</i></font><font color="#008080">m3

</font><font color="#008000"><i># Traiter le cas des includes dans les classes (comme des interfaces) aka mixins
# Traiter public, protected, private

#Gestion des exceptions
</i></font><font color="#008080">i </font>= 0
<font color="#0000A0"><b>begin
  </b></font><b>puts </b><font color="#800080">'Block'
  </font><font color="#0000A0"><b>if </b></font><font color="#008080">i </font>== 0 <font color="#0000A0"><b>then </b></font><b>raise </b><font color="#800080">&quot;PIPO&quot; </font><font color="#0000A0"><b>end
rescue </b></font><font color="#008080">StandardError
  </font><b>puts </b><font color="#800080">'StandardError detecté'
  </font><font color="#008080">i </font>= 1
  <font color="#0000A0"><b>retry </b></font><font color="#008000"><i># pas de ensure
</i></font><font color="#0000A0"><b>else
  </b></font><b>puts </b><font color="#800080">'No exception'
</font><font color="#0000A0"><b>ensure
  </b></font><b>puts </b><font color="#800080">'Toujours exécuté'
</font><font color="#0000A0"><b>end
</b></font><font color="#008000"><i># Lol : 13h35 : y'a catch et throw en plus...

# IO Standard
</i></font><b>print </b><font color="#800080">'Enter your name : '
</font><b>name </b>= <b>gets
name</b>.<b>chomp!
puts </b><font color="#800080">'Your name is '</font>+<b>name</b>+<font color="#800080">'. What a wonderful name !'

</font><font color="#008000"><i># Quelques méthodes utiles
</i></font><b>puts </b><font color="#008080">Dir</font>.<b>getwd

require </b><font color="#800080">'socket'
</font><b>require </b><font color="#800080">'timeout'

</font><font color="#008000"><i># Network &amp; Thread
</i></font><font color="#008080">t </font>= <font color="#008080">Thread</font>.<b>new </b>{ <font color="#008000"><i>#Un thread est lancé dès sa création
  </i></font><b>puts </b><font color="#800080">'Deb'
  </font><font color="#008080">z </font>= <font color="#008080">TCPServer</font>.<b>new</b>(<font color="#800080">'localhost'</font>, 8000) <font color="#008000"><i># Pas de bind ni de listen ;-)
  </i></font><b>puts </b><font color="#008080">z
  </font><b>timeout</b>(10) <font color="#0000A0"><b>do
    </b></font><b>puts </b><font color="#800080">'Waiting connexion'
    </font><font color="#008080">session </font>= <font color="#008080">z</font>.<font color="#008080">accept
    </font><b>puts </b><font color="#800080">'Waiting message'
    </font><font color="#008080">data </font>= <font color="#008080">session</font>.<font color="#008080">recv</font>(255)
    <b>puts </b><font color="#800080">&quot;&gt;&gt;&gt; &quot;</font>+<font color="#008080">data</font>.<b>to_s </b><font color="#008000"><i># 16h04 : ça marche !!
    </i></font><font color="#008080">session</font>.<b>close
  </b><font color="#0000A0"><b>end
</b></font>}
  
<font color="#008080">t2 </font>= <font color="#008080">TCPSocket</font>.<b>new</b>(<font color="#800080">'localhost'</font>, 8000)
<b>puts </b><font color="#008080">t2</font>.<b>send</b>(<font color="#800080">&quot;pipo&quot;</font>,0).<b>to_s</b>+<font color="#800080">' nb octects sent'

</font><font color="#008080">t</font>.<b>join

</b><font color="#008000"><i># Design Pattern : Singleton
</i></font><b>require </b><font color="#800080">'singleton'
</font><font color="#0000A0"><b>class </b></font><font color="#008080">Only
  </font><b>include </b><font color="#008080">Singleton
</font><font color="#0000A0"><b>end
</b></font><font color="#008000"><i># Un seul et même objet partagé pour cette classe : new est private
</i></font><font color="#008080">a </font>= <font color="#008080">Only</font>.<font color="#008080">instance
</font><b>puts </b><font color="#008080">a
b </font>= <font color="#008080">Only</font>.<font color="#008080">instance
</font><b>puts </b><font color="#008080">b

</font></span>
</code></pre>
</body>
</html>