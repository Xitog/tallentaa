<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Aide-mémoire Ruby</title>
    <link href="../zlib/simplex.bootstrap.css" rel="stylesheet">
    <style type="text/css">
        
        div.jumbotron p {
            font-family: "Palatino Linotype";
            font-size: 18px; /* de base 20px */
        }
        div.jumbotron p.n {
            text-align: justify;
        }    
        div.jumbotron p.sign {
            text-align: right;
        }
        div.jumbotron h1 {
            color: #CC6714;
            font-family: "Palatino Linotype";
        }
        
        h2 {
            color: #14cc67;
            font-family: "Palatino Linotype";
            font-size: 22px;
            border-bottom: 1px solid #14cc67;
        }
        h3 {
            color: #6714cc;
            font-family: "Palatino Linotype";
            font-size: 18px;
            /*font-style: italic;*/
        }
        
        a {
            color: #6714cc;
        }
        
        table {
            border: 1px solid #AAA;
            border-collapse: collapse; 
            border-spacing: 0;
            width: 100%;
        }
        th {
            border-bottom: 1px solid #AAA;
        }
        tr:nth-child(odd) {
            background: #DDDDDD;
        }
        td:nth-child(odd) {
            font-family: "Consolas";
            width: 30%;
        }
        
        p.back {
            text-align: center;
        }
        
        div.code {
            background-color: #F9F9F9; /* #efefef; */
            border: 1px solid #AAA;
            padding-left: 3px;
            padding-right: 3px;
            padding-top : 2px;
            padding-bottom : 2px;
            font-family: "Consolas"; 
        }
        
        span {
            background-color: #F9F9F9; /* #efefef; */
            border: 1px solid #AAA;
            padding-left: 3px;
            padding-right: 3px;
            padding-top : 2px;
            padding-bottom : 2px;
            font-family: "Consolas";
        }
        
        strong {
            color: #1479cc;
        }
        /* on utilise b et i uniquement pour le code, strong et em sinon */
        b {
            color: #1479cc;
            font-family: "Consolas";
        }
        i {
            color: #AAA;
        }
        
        span.blue {
            border: 1px solid #9999CC;
            color: #9999CC;
        }
        span.green {
            border: 1px solid #55AA55;
            color: #55AA55;
        }
        span.grey {
            border: 1px solid #AAAAAA;
            color: #111111;
        }
        span.grey , span.green , span.blue {
            font-family: "Consolas";
            font-style: normal;
            font-size: 12px;
            background-color: #F9F9F9;
            padding-left: 2px;
            padding-right: 2px;
        }
        
        b.green {
            color: #55AA55;
        }
        b.blue {
            color: #9999CC;
        }
        b.orange {
            color: #FF6600;
        }
        
    </style>
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
    
    <div id="main" class="container">

        <div class="jumbotron">
            <h1>Aide-mémoire Ruby</h1>
            <hr>
            <p class="n">Une fiche synthétique sur le langage de programmation Ruby pour <strong>rafraîchir sa mémoire</strong> ou <strong>découvrir ce langage si vous connaissez déjà un langage similaire</strong> comme Python, Perl ou PHP.
            <p>Elle aborde toutes les connaissances de base du langage, ainsi que l'essentiel de sa bibliothèque intégrée (Core API) mais pas sa bibliothèque standard, ni des bibliothèques populaires comme Ruby On Rails.</p>
            <p>Cette fiche <strong>n'est pas recommandée pour quelqu'un souhaitant découvrir la programmation</strong> et ses principaux concepts. Pour cela, mieux vaut se tourner vers une véritable introduction à la programmation.</p>
            <p class="sign">Damien Gouteux</p>
        </div>

        <h2 id="sommaire">Sommaire</h2>
        <ol>
            <li><a href="#bases">Bases</a>
            <ol>
                <li><a href="#bas_aff">Affichage</a></li>
                <li><a href="#bas_key">Mots réservés</a></li>
                <li><a href="#bas_com">Commentaires</a></li>
                <li><a href="#bas_beg">BEGIN et END</a></li>
            </ol></li>
            <li><a href="#sites">Autres ressources</a></li>
            <li><a href="#variables">Variables, constantes et globales</a>
            <ol>
                <li><a href="#var_var">Variables</a></li>
                <li><a href="#var_con">Constantes</a></li>
                <li><a href="#var_glo">Globales</a></li>
                <li><a href="#var_ins">Variables d'instance</a></li>
                <li><a href="#var_cls">Variables de classe</a></li>
                <li><a href="#var_psd">Pseudo-variables</a></li>
            </ol></li>
            <li><a href="#int_float">Entiers et Réels</a>
            <ol>
                <li><a href="#int">Entiers</a></li>
                <li><a href="#float">Réels</a></li>
            </ol></li>
            <li><a href="#string">Chaînes de caractères</a></li>
            <li><a href="#bool_range_nil">Booléens, intervalles et type vide</a>
            <ol>
                <li><a href="#bool">Booléens</a></li>
                <li><a href="#range">Intervalles</a></li>
                <li><a href="#void">Type "vide"</a></li>
            </ol></li>
            <li><a href="#list">Listes</a><ol>
                <li><a href="#list_create">Création</a></li>
                <li><a href="#list_read">Fonctions d'accès</a></li>
                <li><a href="#list_update">Fonctions d'affectation et d'insertion</a></li>
                <li><a href="#list_delete">Fonctions de suppression</a></li>
                <li><a href="#list_test">Fonctions de tests et d'information</a></li>
                <li><a href="#list_others">Autres fonctions principales</a></li>
            </ol></li>
            <li><a href="#dict">Dictionnaires</a><ol>
                <li><a href="#dict_create">Création</a></li>
                <li><a href="#dict_read">Fonctions d'accès</a></li>
                <li><a href="#dict_update">Fonctions d'affectation et d'insertion</a></li>
                <li><a href="#dict_delete">Fonctions de suppression</a></li>
                <li><a href="#dict_test">Fonctions de tests et d'information</a></li>
                <li><a href="#dict_others">Autres fonctions principales</a></li>
            </ol></li>
            <li><a href="#op">Opérateurs</a>
            <ol>
                <li><a href="#op_bin">Opérateurs binaires</a></li>
                <li><a href="#op_una">Opérateurs unaires</a></li>
                <li><a href="#op_ter">Opérateur ternaire</a></li>
                <li><a href="#op_precedence">Précédence des opérateurs</a></li>
                <li><a href="#op_redef">Redéfinition d'opérateur</a></li>
            </ol></li>
            <li><a href="#flux">Contrôle du flux</a>
            <ol>
                <li><a href="#seq">Séquence</a></li>
                <li><a href="#cond">Conditions</a></li>
                <li><a href="#loop">Répétitions</a></li>
            </ol></li>
            <li><a href="#elem_fun">Fonctions</a></li>
            <li><a href="#elem_class">Classes et objets</a></li>
            <li><a href="#elem_mod">Modules et fichiers</a>
            <ol>
                <li><a href="#mod_mod">Définition d'un module</a></li>
                <li><a href="#mod_mod">Inclusion des éléments d'un module</a></li>
                <li><a href="#mod_req">Code réparti sur plusieurs fichiers</a></li>
            </ol></li>
            <li><a href="#spe">Gestion des exceptions</a>
            <ol>
                <li><a href="#exp">Exceptions</a></li>
                <li><a href="#exp_type">Type d'exceptions</a></li>
                <li><a href="#exp_throw">Catch et throw</a></li>
            </ol></li>
            <li><a href="#utiles">Utiles</a></li>
        </ol>

        <h2 id="bases">1. Bases</h2>

        <p>Date d'apparition du langage : 1995</p>
        <p>Créateur : Yukihiro "Matz" Matsumoto (Japon)</p>
        <p>Version actuelle à la date d'écriture : 2.2.3 (2015)</p>
        <p>Extension d'un fichier Ruby : <span>rb</span></p>
        <p>Exécuter mon_fichier.rb : <span><b>ruby</b> </i>mon_fichier.rb</i></span></p>
        <p>Première ligne d'un fichier sous Linux : <span>#!/usr/bin/ruby</span></p>
        <p>Accéder à la console interactive : <span><b>irb</b></span></p>
        <p>IRb signifie <i>Interactive Ruby</i>.</p>

        <h3 id="bas_aff">Affichage</h3>
        <p>Affichage sur la sortie standard (console) : <span>puts</span>
        <p>Le programme le plus simple en Ruby : <span>puts "Hello World!"</span></p>
        <p>Interprétation de code dans une chaîne : <span> puts "#{a+1}"</span></p>

        <h3 id="bas_key">Mots réservés</h3>
        <p>Mots réservés (39) : BEGIN, END, alias, and, begin, break, case, class, def, defined?, do, else, elsif, end, ensure, false, for, if, in, module, next, nil, not, or, redo, rescue, retry, return, self, super, then, true, undef, unless, until, when, while, __FILE__, __LINE__</p>

        <h3 id="bas_com">Commentaires</h3>
        <p>Commentaires en Ruby : <span><i># mon commentaire jusqu'à la fin de la ligne</i></span></p>
        <p>Commentaires sur plusieurs lignes : 
        <div class="code">
            <b>=begin</b><br>
            <i>&nbsp;&nbsp;vos lignes</i><br>
            <b>=end</b>
        </div>

        <h3 id="bas_beg">BEGIN et END</h3>
        <p>Déclarer un bloc de code exécuté avant l'exécution du programme : <span><b>BEGIN</b> { <i>code</i> }</span></p>
        <p>Déclarer un bloc de code exécuté après l'exécution du programme : <span><b>END</b> { <i>code</i> }</span></p>

        <p class="back"><a href="#sommaire">Retour sommaire</a></p>

        <h2 id="sites">2. Autres ressources</h2> 
        <ul>
          <li>Site officiel du langage : <a href="https://www.ruby-lang.org">https://www.ruby-lang.org</a></li>
          <li>Site de la documentation : <a href="http://ruby-doc.org/">http://ruby-doc.org/</a></li>
          <li>Installer Ruby sur Windows : <a href="http://rubyinstaller.org/">http://rubyinstaller.org/</a></li>
          <li>Télécharger le code source de Ruby : <a href="https://www.ruby-lang.org/fr/downloads/">https://www.ruby-lang.org/fr/downloads/</a></li>
          <li>Liste des bibliothèques disponibles : <a href="https://www.ruby-toolbox.com/">https://www.ruby-toolbox.com/</a></li>
          <li>Fiche Wikipédia française : <a href="http://fr.wikipedia.org/wiki/Ruby">http://fr.wikipedia.org/wiki/Ruby</a></li>
          <li>Fiche Wikipédia anglaise : <a href="http://en.wikipedia.org/wiki/Ruby_%28programming_language%29">http://en.wikipedia.org/wiki/Ruby_%28programming_language%29</a></li>
          <li>Console Ruby en ligne : <a href="http://tryruby.org">http://tryruby.org</a></li>
          <li>Une autre console Ruby en ligne : <a href="https://repl.it/languages/ruby">https://repl.it/languages/ruby</a></li>
          <li>Le "Pickaxe", livre de référence sur Ruby : <a href="http://ruby-doc.com/docs/ProgrammingRuby/">Programming Ruby</a></li>
          <li>Livre sur Wikibooks : <a href="https://en.wikibooks.org/wiki/Ruby_Programming">https://en.wikibooks.org/wiki/Ruby_Programming</a></li>
          <li>Site de tutoriels : <a href="http://www.tutorialspoint.com/ruby/">http://www.tutorialspoint.com/ruby/</a></li>
          <li>Ruby Inside, actualités et tutoriels (jusqu'à 2014): <a href="http://www.rubyinside.com/">http://www.rubyinside.com/</a></li>
          <li>Ruby On Rails (RoR), le framework qui a fait connaître Ruby : <a href="http://rubyonrails.org/">http://rubyonrails.org/</a></li>
          <li>Site communautaire français autour de RoR : <a href="http://www.railsfrance.org/">http://www.railsfrance.org/</a></li>
          <li>Site communautaire français autour de Ruby (mort) : <a href="http://www.rubyfrance.org/">http://www.rubyfrance.org/</a></li>
          <li>Ruby Quicktips, des bouts de code utile :<a href="http://rubyquicktips.com/">http://rubyquicktips.com/</a></li>
        </ul>
        <p class="back"><a href="#sommaire">Retour sommaire</a></p>

        <h2 id="variables">3. Variables, constantes et globales</h2>

        <h3 id="var_var">Variables</h3>
        <p>Déclaration d'une variable locale : <span>mon_identifiant = expression</span></p>
        <p>Les caractères autorisés pour constituer mon_identifiant sont les chiffres, les lettres et le caractère souligné _.</p>
        <p>Un identifiant <strong>NE PEUT PAS</strong> commencer par un chiffre néanmoins.</p>
        <p>Un identifiant <strong>NE PEUT PAS</strong> être un des mots réservés.</p>
        <p>Une variable ne durera que jusqu'à la fin de son bloc où elle définit (classe, fonction, module, begin/end {}.</p>

        <h3 id="var_con">Constantes</h3>
        <p>Déclaration d'une constante : <span>Mon_identifiant = expression</span></p>
        <p>En Ruby, une constante commence par une majuscule et <strong>EST</strong> modifiable mais un message d'avertissement sera généré : <br>
        <p><span>warning: already initialized constant Mon_identifiant</span></p>
        <p><span>warning: previous definition of Mon_identifiant was here</span></p>
        <p>Les noms de classe en Ruby doivent être des constantes (et donc commencer par une majuscule).</p>
        <p>La constance en Ruby est une constance de <strong>référence</strong>. Mon_identifiant réfèrera toujours le même objet. Mais cet objet peut-être changé lui. Pour geler l'état d'un objet, il faut utiliser sa méthode <span>freeze</span>.

        <h3 id="var_glo">Globales</h3>
        <p>Déclaration d'une variable globale (elle sera accessible partout) : <span>$mon_identifiant = expression</span></p>

        <h3 id="var_ins">Variables d'instance</h3>
        <p>Une variable d'instance commence par le signe @ : <span>@a</span></p>
        <p>Elles se déclarent dans le corps des méthodes.</p>

        <h3 id="var_cls">Variables de classe</h3>
        <p>Une variable d'instance commence par le signe @@ : <span>@@a</span></p>
        <p>Elle se déclarent dans le corps de la classe.</p>

        <h3 id="var_psd">Pseudo-variables</h3>
        <p>Ce sont des variables fondamentales utilisées par Ruby que l'on ne peut assigner à nouveau :</p>
        <p>Les booléens <span><b>true</b></span> et <span><b>false</b></span>.</p>
        <p>La "valeur vide" : <span><b>nil</b></span>.</p>
        <p>Une référence vers l'objet courant : <span><b>self</b></span>.</p>
        <p>Le nom du fichier courant : <span><b>__FILE__</b></span>.</p>
        <p>Le numéro de la ligne courante : <span><b>__LINE__</b></span>.</p>

        <p class="back"><a href="#sommaire">Retour sommaire</a></p>

        <!-- ---------------------------------------------------------------- -->
        <h2 id="int_float">4. Entiers et réels</h2>
        <!-- ---------------------------------------------------------------- -->
        
        <p>Pour chaque type, on présentera son nom et les formes possibles pour ses littéraux. On complétera par une liste de leurs principales méthodes.</p>

        <h3 id="int">Entiers</h3>
        <table>
        <tbody>
            <tr>
                <th>Nom </th>
                <th>Littéral </th>
            </tr>
            <tr>
                <td> Fixnum, Bignum </td>
                <td> 0b1 (binaire)<br>07 (octal)<br>0xf (hexadécimal)<br>10 (décimal)<br>1_000 (1000 en format plus lisible)</td>
            </tr>
        </tbody>
        </table>
        <p>Ruby transforme automatiquement un Fixnum en Bignum quand c'est nécessaire.</p>

        <h3 id="float">Réels</h3>
        <table>
        <tbody>
            <tr>
                <th>Nom </th>
                <th>Littéral </th>
            </tr>
            <tr>
                <td> Float </td>
                <td> 1000.0<br>1E3<br>1.0e8<br> </td>
            </tr>
        </tbody>
        </table>
        <p>Listes des fonctions principales :</p>
        <table>
        <tbody>
            <tr>
                <th>Fonction </th>
                <th>Description </th>
            </tr>
            <tr>
                <td> floor to_s </td>
                <td> entier inférieur immédiat (troncation) </td>
            </tr>
            <tr>
                <td> ceil </td>
                <td> entier supérieur immédiat </td>
            </tr>
            <tr>
                <td> round </td>
                <td> arrondi </td>
            </tr>
        </tbody>
        </table>
        
        <!-- ---------------------------------------------------------------- -->
        <h2 id="string">5. Chaînes de caractères</h3>
        <!-- ---------------------------------------------------------------- -->
        
        <table>
        <tbody>
            <tr>
                <th>Nom </th>
                <th>Littéral </th>
            </tr>
            <tr>
                <td> String </td>
                <td> "abcde"<br>'abcde' </td>
            </tr>
        </tbody>
        </table>
        <p>Les chaînes avec des guillemets doubles interprètent les caractères spéciaux précédés d'un antislash. Les chaînes avec les guillemets simples n'interprètent que les caractères spéciaux <span>\'</span> et <span>\\</span>, produisant ' et \ respectivement. Le caractère spécial le plus utilisé est <span>\n</span> pour faire une nouvelle ligne.</p>
        <p>On peut insérer du code dans n'importe quel chaîne en utilisant <span>#{<i>code</i>}</span>, il sera exécuté une fois à la création de l'objet.</p>
        <p>Listes des fonctions principales :</p>
        <table>
        <tbody>
            <tr>
                <th>Fonction </th>
                <th>Description </th>
            </tr>
            <tr>
                <td> to_s </td>
                <td> produit une chaîne </td>
            </tr>
            <tr>
                <td> equal? </td>
                <td> égalité entre deux chaînes </td>
            </tr>
            <tr>
                <td> size </td>
                <td> longueur de la chaîne </td>
            </tr>
            <tr>
                <td> + </td>
                <td> concaténation de 2 chaînes </td>
            </tr>
            <tr>
                <td> * </td>
                <td> duplique n fois </td>
            </tr>
            <tr>
                <td> upcase </td>
                <td> mise en majuscule </td>
            </tr>
            <tr>
                <td> downcase </td>
                <td> mise en minuscule </td>
            </tr>
            <tr>
                <td> s[i] </td>
                <td> accès au caractère à l'index i </td>
            </tr>
            <tr>
                <td> s[n..m] </td>
                <td> extrait une sous-chaîne </td>
            </tr>
            <tr>
                <td> s[n, longueur] </td>
                <td> extrait une sous-chaîne </td>
            </tr>
            <tr>
                <td> index(s) </td>
                <td> cherche l'index d'une sous-chaîne </td>
            </tr>
            <tr>
                <td> rindex(s) </td>
                <td> cherche l'index d'une sous-chaîne en partant de la fin </td>
            </tr>
        </tbody>
        </table>

        <!-- ---------------------------------------------------------------- -->
        <h2 id="bool_range_nil">6. Booléens, intervalles et type vide</h3>
        <!-- ---------------------------------------------------------------- -->
        
        <h3 id="bool">Booléens</h3>
        <table>
        <tbody>
            <tr>
                <th>Classe </th>
                <th>Littéral </th>
            </tr>
            <tr>
                <td> FalseClass </td>
                <td> <b>false</b> </td>
            </tr>
            <tr>
                <td> TrueClass </td>
                <td> <b>true</b> </td>
            </tr>
        </tbody>
        </table>
        <ul>
            <li>Dans les tests, toutes les valeurs autres que <b>false</b> et <b>nil</b> sont vraies (dont <b>0</b>).</li>
        </ul>
        
        <h3 id="range">Intervalles</h3>
        <table>
        <tbody>
            <tr>
                <th>Nom </th>
                <th>Littéral </th>
            </tr>
            <tr>
                <td> Range </td>
                <td> a..b <br> a...b </td>
            </tr>
        </tbody>
        </table>
        <p>Cela produit un intervalle comprenant les valeurs entières de a à b.</p>
        <p>En utilisant trois points, la valeur b est exclue.</p>

        <h3 id="void">Type "vide"</h3>
        <p>Il représente l'absence de référence. Une variable qui est égale à <span>nil</span> ne référence rien.</p>
        <table>
        <tbody>
            <tr>
                <th>Classe </th>
                <th>Littéral </th>
            </tr>
            <tr>
                <td> NilClass </td>
                <td> <b>nil</b> </td>
            </tr>
        </tbody>
        </table>
        
        <p class="back"><a href="#sommaire">Retour sommaire</a></p>
        
        <!-- ---------------------------------------------------------------- -->
        <h2 id="list">7. Listes</h3>
        <!-- ---------------------------------------------------------------- -->
        
        <h3 id="list_create">Création</h3>
        
        <p>Le premier élément d'une liste en Ruby a 0 pour indice.</p>
        <p>Le dernier élément d'une liste en Ruby à n-1 pour indice, où n est le nombre d'élément de la liste.</p>
        <p>Un indice négatif signifie que l'on part de la fin : -1 désigne le dernier élément dans ce cas et -n, le premier élément de la liste, où n est le nombre d'élément de la liste.</p>
        <table>
        <tbody>
            <tr>
                <th>Nom </th>
                <th>Littéral </th>
            </tr>
            <tr>
                <td> Array </td>
                <td> [ 1, 2, 3] <br> 1, 2, 3 <br> %w(abc def) </td>
            </tr>
        </tbody>
        </table>
        <p>La méthode de classe <span>new</span> permet de créer une nouvelle liste :</p>
        <div class="code">
            liste1 = Array.new <i># liste1 aura 0 élément</i><br>
            liste2 = Array.new(5) <i># liste2 aura 5 éléments nil</i><br>
            liste3 = Array.new(3, "a") <i># liste3 aura 3 éléments "a"</i><br>
            liste4 = Array.[]("a", "b", "c") <i># liste4 aura 3 éléments</i><br>
            liste5 = Array["a", "b", "c"] <i># liste5 aura 3 éléments</i><br>
            liste6 = Array(0..2) <i># liste6 aura 3 éléments : 0, 1, 2</i><br>
            <i># liste7 aura 4 éléments égaux à 0, 3, 6, 9. i est l'indice qui sera donné en paramètre au bloc :</i><br>
            liste7 = Array.new(4) { |i| i = i * 3 }<br> 
        </div>
        <p>La classe <span>Array</span> inclut le module <span>Enumerable</span></p>
        
        <h3 id="list_read">Fonctions d'accès</h3>
        
        <table>
        <tbody>
            <tr>
                <th>Fonction </th>
                <th>Description </th>
            </tr>
            <tr>
                <td> a[i], a.slice(i), a.at(i)</td>
                <td> accès à la valeur à l'indice i. Si l'indice ne correspond à aucun élément, <strong>nil</strong> est retourné. </td>
            </tr>
            <tr>
                <td> a.fetch(i) </td>
                <td> accès à l'objet référencé par l'indice i. Si l'indice n'est pas valide, une exception de type IndexError est levée </td>
            </tr>
            <tr>
                <td> a.fetch(i, v) </td>
                <td> accès à l'objet référencé par l'indice i. Si l'indice n'est pas valide, v est retournée </td>
            </tr>
            <tr>
                <td> a.fetch(i) { |i| actions } </td>
                <td> accès à l'objet référencé par l'indice i. Si l'indice n'est pas valide, le résultat du bloc, auquel est passé l'indice en paramètre, est retourné </td>
            </tr>
            
            <tr>
                <td> a[-1] </td>
                <td> accès au dernier élément. Si l'indice ne correspond à aucun élément, nil est retourné. </td>
            </tr>
            <tr>
                <td> a.first </td>
                <td> retourne le premier élément de la liste a ou nil si la liste est vide </td>
            </tr>
            <tr>
                <td> a.first(n) </td>
                <td> retourne les n premiers éléments de la liste a </td>
            </tr>
            <tr>
                <td> a.last </td>
                <td> retourne le dernier élément de la liste a ou nil si la liste est vide </td>
            </tr>
            <tr>
                <td> a.first(n) </td>
                <td> retourne les n derniers éléments de la liste a </td>
            </tr>
            <tr>
                <td> a.slice(s, n), a[s, n] </td>
                <td> renvoie une nouvelle liste constituée des éléments de la liste a à partir de l'indice s jusqu'à (s+n)-1. </td>
            </tr>
            <tr>
                <td> a.slice(x..y), a[x..y] </td>
                <td> renvoie nouvelle liste constituée des éléments d'indice x à y dans a </td>
            </tr>
            <tr>
                <td> a.slice(x...y), a[x...y] </td>
                <td> renvoie nouvelle liste constituée des éléments d'indice x à y-1 dans a </td>
            </tr>
            <tr>
                <td> a.find(o), a.detect(o), a.indexOf(o), a.index(o), a.search(o) </td>
                <td> retourne le premier indice référençant l'objet o dans la liste a </td>
            </tr>
            <tr>
                <td> a.rindex(o) </td>
                <td> retourne le dernier indice référençant l'objet o dans la liste a </td>
            </tr>
            <tr>
                <td> a.find_all { |o| actions }, a.select { |o| actions } </td>
                <td> retourne une nouvelle liste avec tous les éléments pour lesquels le bloc, auquel on passe l'élément, retourne vrai </td>
            </tr>
            <tr>
                <td> a.reject {|o| block } </td>
                <td> retourne une nouvelle liste contenant chaque élément de a pour lequel le bloc qui le prend en paramètre est faux </td>
            </tr>
            <tr>
                <td> a.values_at(filter, ...) </td>
                <td> retourne les éléments de a correspondant au filtre filter qui peut être des indices ou des objets Range.</td>
            </tr>
        </tbody>
        </table>
        
        <h3 id="list_update">Fonctions d'affectation et d'insertion</h3>
        
        <table>
        <tbody>
            <tr>
                <th>Fonction </th>
                <th>Description </th>
            </tr>
            <tr>
                <td> a[i] = e </td>
                <td> l'indice i de la liste référencera à présent l'objet e </td>
            </tr>
            <tr>
                <td> a[i, n] = e</td>
                <td> tous les indices entre i et (i+n)-1 référenceront à présent l'objet e.<br> Si n est égal à zéro, un indice référençant l'élément e sera ajouté à la liste (comme insert) </td>
            </tr>
            <tr>
                <td> a[i, n] = b </td>
                <td> tous les indices entre i et (i+n)-1 référenceront à présent l'objet de même indice dans la liste b.<br> Si la liste b est trop petite, <strong>la liste a sera raccourcie</strong> </td>
            </tr>
            <tr>
                <td> a.insert(i, o) </td>
                <td> insère dans la liste juste avant l'indice i un nouvel indice qui référencera l'objet o et deviendra le nouvel indice i </td>
            </tr>
            <tr>
                <td> a.fill(o) </td>
                <td> tous les indices de la liste a référenceront l'objet o </td>
            </tr>
            <tr>
                <td> a.fill(o, s), a.fill(o, s, n) </td>
                <td> les indices de la liste a de s à la fin, ou de s à (s+n)-1 si n est spécifié, référenceront l'objet o </td>
            </tr>
            <tr>
                <td> a.fill(o, x..y) </td>
                <td> les indices de x à y de la liste a référenceront l'objet o </td>
            </tr>
            <tr>
                <td> a.fill { |i| actions }, a.fill(s) { |i| actions }, a.fill(s, n) { |i| actions }, a.fill(x..y) { |i| actions } </td>
                <td> les indices spécifiés référenceront le résultat du bloc auquel l'indice sera passé en paramètre </td>
            </tr>
            <tr>
                <td> a.replace(b) </td>
                <td> remplace les éléments de a par ceux de b (cela réaffecte a une nouvelle liste) </td>
            </tr>
            <tr>
                <td> a.unshift(o, ...) </td>
                <td> ajoute un ou plusieurs éléments au début de la liste et retourne la liste </td>
            </tr>
            <tr>
                <td> a.push(o, ...) </td>
                <td> ajoute un ou plusieurs éléments à la fin de la liste et retourne la liste </td>
            </tr>
        </tbody>
        </table>
        
        <h3 id="list_delete">Fonctions de suppression</h3>
        
        <table>
        <tbody>
            <tr>
                <td> a.clear </td>
                <td> efface toute la liste, sa longueur sera égale à 0 après.  Cette fonction modifie a, même si elle n'a pas de ! </td>
            </tr>
            <tr>
                <td> a.delete_at(i) </td>
                <td> supprime l'indice i en retournant l'objet à qui il faisait référence. Si l'indice est invalide, nil est retourné.  Cette fonction modifie a, même si elle n'a pas de ! </td>
            </tr>
            <tr>
                <td> a.delete(o) </td>
                <td> supprime tous les indices référençant o. <strong>Si aucun n'est trouvé, retourne nil. Cette fonction modifie a, même si elle n'a pas de !</strong> </td>
            </tr>
            <tr>
                <td> a.delete(o) { actions } </td>
                <td> supprime tous les indices référençant o. <strong>Si aucun n'est trouvé, retourne le résultat du bloc qui n'est pas exécuté sinon. Cette fonction modifie a, même si elle n'a pas de !</strong> </td>
            </tr>
            <tr>
                <td> a.delete_if { |o| actions } </td>
                <td> supprime tous les indices pour lequel le bloc, auquel on passe l'objet référencé par l'indice, retourne vrai. Cette fonction modifie a, même si elle n'a pas de ! </td>
            </tr>
            <tr>
                <td> a.reject! {|o| block } </td>
                <td> supprime dans a chaque élément pour lequel le bloc qui le prend en paramètre est vrai, équivalent à delete_if </td>
            </tr>
            <tr>
                <td> array.slice!(index), array.slice!(s, n), array.slice!(x..y), array.slice!(x...y)</td>
                <td> supprime les éléments spécifiés </td>
            </tr>
        </tbody>
        </table>
        
        <h3 id="list_test">Fonctions de tests et d'information</h3>
        
        <table>
        <tbody>
            <tr>
                <td> a == b </td>
                <td> vrai si a et b ont la même longueur et a[i] == b[i] pour i compris entre 0 et la longueur-1.</td>
            </tr>
            <tr>
                <td> a.member?(o), o <b>in</b> a, a.include?(o) </td>
                <td> vrai si a contient un indice référençant l'objet o </td>
            </tr>
            <tr>
                <td> a.any? </td>
                <td> vrai si a contient au moins 1 indice référençant un objet <strong>autre que nil</strong></td>
            </tr>
            <tr>
                <td> a.all?(o) </td>
                <td> vrai si tous les indices de a référencent l'objet o </td>
            </tr>
            <tr>
                <td> a.empty? </td>
                <td> vrai si la longueur de la liste a est égale à 0 </td>
            </tr>
            <tr>
                <td> a.eql?(b) </td>
                <td> vrai si a et b sont le même objet ou sont deux listes contenant les mêmes références </td>
            </tr>
            <tr>
                <td> a.size, a.length </td>
                <td> retourne la taille de la liste a </td>
            </tr>
            <tr>
                <td> a.nitems </td>
                <td> retourne le nombre d'éléments non égal à nil dans la liste a </td>
            </tr>
            <tr>
                <td> a.min </td>
                <td> retourne l'élément minimal de la liste a (tous les éléments doivent pouvoir être comparés) </td>
            </tr>
            <tr>
                <td> a.max </td>
                <td> retourne l'élément maximal de la liste a (tous les éléments doivent pouvoir être comparés)  </td>
            </tr>
        </tbody>
        </table>
        
        <h3 id="list_others">Autres fonctions principales</h3>
        
        <table>
        <tbody>
            <tr>
                <th>Fonction </th>
                <th>Description </th>
            </tr>
            <tr>
                <td> a + b, a | b, a.concat(b) </td>
                <td> retourne une nouvelle liste qui est la concaténation de a et b </td>
            </tr>
            <tr>
                <td> a - b </td>
                <td> retourne une nouvelle liste qui contient les éléments de a ne figurant pas dans b </td>
            </tr>
            <tr>
                <td> a * i </td>
                <td> si i est un entier, retourne une nouvelle liste qui est la concaténation de i fois a </td>
            </tr>
            <tr>
                <td> a * abc </td>
                <td> si abc est une chaîne, retourne une nouvelle chaîne qui est la concaténation des éléments de a séparés par abc. Équivalent de join.</td>
            </tr>
            <tr>
                <td> a & b</td>
                <td> renvoie une nouvelle liste contenant les éléments communs à a et b</td>
            </tr>
            <tr>
                <td> a &lt;&lt; e </td>
                <td> ajout d'un élément e dans l1 </td>
            </tr>
            <tr>
                <td> a &lt;=&gt; b </td>
                <td> passe les éléments a et b à l'opérateur <=> un à un. S'arrête dès que le résultat est différent de 0 (donc à la première différence) et retourne le résultat </td>
            </tr>
            <tr>
                <td> a.shift </td>
                <td> retourne le premier élément et l'enlève. retourne nil si la liste a est vide </td>
            </tr>
            <tr>
                <td> a.pop </td>
                <td> retourne le dernier élément et l'enlève </td>
            </tr>
            <tr>
                <td> a.reverse </td>
                <td> donne la liste inversée </td>
            </tr>
            <tr>
                <td> a.reverse! </td>
                <td> inverse l'ordre des éléments de a </td>
            </tr>
            <tr>
                <td> a.flatten </td>
                <td> si la liste contient des listes, elles seront toutes fusionnées en la seule liste qui sera retournée </td>
            </tr>
            <tr>
                <td> a.flatten! </td>
                <td> si la liste contient des listes, elles seront toutes fusionnées au sein de la liste a. Retourne nil si aucune modification n'est faite </td>
            </tr>
            <tr>
                <td> a.frozen? </td>
                <td> retourne vrai si la liste ne peut être modifiée (soit par l'appel de la fonction freeze, soit durant un tri de façon temporaire) </td>
            </tr>
            <tr>
                <td> a.hash </td>
                <td> retourne une valeur unique selon le contenu de la liste. Deux listes avec le même contenu auront la même valeur </td>
            </tr>
            <tr>
                <td> a.each { |o| actions } </td>
                <td> parcours chaque élément de la liste a en le passant en paramètre du bloc </td>
            </tr>
            <tr>
                <td> a.reverse_each { |o| actions } </td>
                <td> parcours chaque élément de la liste a en ordre inverse en le passant en paramètre du bloc </td>
            </tr>
            <tr>
                <td> a.each_index { |i| actions } </td>
                <td> parcours chaque élément de la liste a en passant son indice en paramètre du bloc </td>
            </tr>
            <tr>
                <td> a.compact </td>
                <td> retourne une nouvelle liste à partir de a en ne reprenant pas les indices qui référencent nil</td>
            </tr>
            <tr>
                <td> a.compact! </td>
                <td> supprime dans la liste a les indices qui référencent nil. <strong>Retourne nil si aucun n'a été trouvé</strong>, a sinon</td>
            </tr>
            <tr>
                <td> a.map {|o| actions} a.collect {|o| actions} </td>
                <td> invoque le bloc pour chaque élément de la liste a et collecte les résultats dans une nouvelle liste retournée </td>
            </tr>
            <tr>
                <td> a.map! {|o| actions} a.collect! {|o| actions} </td>
                <td> remplace chaque élément de la liste a par l'élément retourné par le bloc appelé avec l'objet que référence l'indice en paramètre </td>
            </tr>
            <tr>
                <td> partition </td>
                <td> partitionne en deux listes selon le résultat d'un bloc </td>
            </tr>
            <tr>
                <td> a.join(sep) </td>
                <td> fusionne tous les éléments de la liste a en y intercalant la chaîne sep (pareil que l'opérateur * avec une chaîne) </td>
            </tr>
            <tr>
                <td> each_with_index </td>
                <td> parcours la liste avec un bloc recevant l'élément et un index </td>
            </tr>
            <tr>
                <td> a.uniq </td>
                <td> retourne une nouvelle liste en supprimant les éléments en double </td>
            </tr>
            <tr>
                <td> a.uniq! </td>
                <td> enlève les éléments en double dans a</td>
            </tr>
            <tr>
                <td> a.sort, a.sort { |a, b| actions } </td>
                <td> retourne une nouvelle liste en triant les éléments de la liste a </td>
            </td>
            <tr>
                <td> a.sort, a.sort { |a, b| actions } </td>
                <td> trie la liste a </td>
            </td>
            <tr>
                <td> a.zip(p, ...), a.zip(p, ...) { |arr| actions } </td>
                <td> p doit répondre à la méthode each. Associe chaque élément de p à un élément de a et retourne la nouvelle liste ainsi constituée. Si un bloc est fourni, chaque élément ainsi créé sera passé en paramètre au bloc mais la méthode retournera nil </td>
            </tr>
            <tr>
                <td> a.assoc(o) </td>
                <td> la liste a doit être une liste de liste. Retourne la première liste (par ordre d'indice) qui se trouve dans a dont le premier élément est une référence vers o. </td>
            </tr>
            <tr>
                <td> a.rassoc(o) </td>
                <td> la liste a doit être une liste de liste. Retourne la première liste (par ordre d'indice) qui se trouve dans a dont le second élément est une référence vers o. </td>
            </tr>
            <tr>
                <td> a.to_a </td>
                <td> renvoie la liste elle-même. si cette méthode est appelée sur une instance d'une sous-classe de Array, le résultat sera une instance d'Array (la classe-mère) </td>
            </tr>
            <tr>
                <td> a.to_ary </td>
                <td> retourne a </td>
            </tr>
            <tr>
                <td> a.to_s </td>
                <td> retourne a.join (c'est-à-dire une chaîne des éléments de la liste concaténés sans séparateur) </td>
            </tr>
            <tr>
                <td> a.inspect </td>
                <td> renvoie une version affichable de la liste </td>
            </tr>
            <tr>
                <td> inject </td>
                <td> exécute un bloc sur chaque élément en passant le résultat à l'exécution suivante </td>
            </tr>
            <tr>
                <td> a.pack(template) </td>
                <td> transforme le tableau en une séquence binaire (sous la forme d'une chaîne) selon le format template </td>
            </tr>
            <tr>
                <td> a.transpose </td>
                <td> ne marche qui a est une liste de liste. inverse les lignes et les colonnes </td>
            </tr>
        </tbody>
        </table>
        
        <p class="back"><a href="#sommaire">Retour sommaire</a></p>
        
        <!-- ---------------------------------------------------------------- -->
        <h2 id="dict">8. Dictionnaires</h3>
        <!-- ---------------------------------------------------------------- -->
        
        <h3 id="dict_create">Création</h3>
        
        <p>Un dictionnaire, ou table de hachage, associe une <strong>clé</strong> à une <strong>valeur</strong>. La clé peut être de n'importe quel type, comme la valeur.</p>
        <p>Lorsque l'on tente d'accéder à une valeur par une clé qui n'existe, <strong>nil</strong> est retourné ou la valeur par défaut, si elle a été définie lors de la création du dictionnaire.</p>
        
        <table>
        <tbody>
            <tr>
                <th>Nom </th>
                <th>Littéral </th>
            </tr>
            <tr>
                <td> Hash </td>
                <td> { 1 =&gt; 'a' , 2 =&gt; 'b' , 3 =&gt; 'c' } </td>
            </tr>
        </tbody>
        </table>
        
        <p>La méthode de classe <span>new</span> permet de créer un nouveau dictionnaire :</p>
        <div class="code">
            dico1 = Hash.new <i># dico1 aura 0 élément</i><br>
            dico2 = Hash.new(23) <i># 0 élément et 23 comme valeur par défaut</i><br>
            dico3 = Hash.new[1 => 'a', 2 => 'b'] <i># dico3 aura 2 éléments</i><br>
        </div>
        <p>On peut changer plus tard le hash en utilisant :</p>
        <div class="code">
            dico2.default = nouvelle_valeur
        </div>
        
        <h3 id="dict_read">Fonctions d'accès</h3>
        
        <table>
        <tbody>
            <tr>
                <th>Fonction </th>
                <th>Description </th>
            </tr>
            <tr>
                <td> d[key] <br> d.fetch(key) </td>
                <td> retourne la valeur de la paire avec la clé correspondante. Si elle n'existe pas, retourne la valeur par défaut dictionnaire </td>
            </tr>
            <tr>
                <td> d.key(value) <br> d.index(value) <i># ne plus utiliser</i> </td>
                <td> retourne une des clés correspondant à la valeur value, ou nil si la valeur n'a pas été trouvée (indépendamment de la valeur de d.default) </td>
            </tr>
            <tr>
                <td> d.select { |key, value| block } </td>
                <td> retourne un dictionnaire constitué des paires de d pour lesquelles le block, auquel on passe la clé et sa valeur correspondante, retourne vrai </td>
            </tr>
            <tr>
                <td> values_at(key1, key2, ...) </td>
                <td> retourune une liste contenant les valeurs correspondant aux clés données en paramètres </td>
            </tr>
            <tr>
                <td> d.each { |key, value| block } <br> d.each_pair { |key, value| block } </td>
                <td> parcours l'ensemble du dictionnaire, exécutant à chaque fois le block qui reçoit en paramètre la paire clé-valeur </td>
            </tr>
            <tr>
                <td> d.each_key { |key| block } </td>
                <td> parcours l'ensemble du dictionnaire, exécutant à chaque fois le block qui reçoit en paramètre la clé de la paire </td>
            </tr>
            <tr>
                <td> d.each_value { |key| block } </td>
                <td> parcours l'ensemble du dictionnaire, exécutant à chaque fois le block qui reçoit en paramètre la valeur de la paire </td>
            </tr>
        </tbody>
        </table>
        
        <h3 id="dict_update">Fonctions d'affectation et d'insertion</h3>
        
        <table>
        <tbody>
            <tr>
                <th>Fonction </th>
                <th>Description </th>
            </tr>
            <tr>
                <td> d.[key] = value </td>
                <td> stocke une nouvelle paire (key, value) dans d ou met à jour la valeur pour la paire ayant la clé key </td>
            </tr>
            <tr>
                <td> d1.update(d2)<br>d1.merge(d2) </td>
                <td> met à jour d1 selon d2 : ajoute les paires clé-valeur existant dans d2 et non d1, met à jour les clés de d1 contenues aussi dans d2 en prenant la valeur de d2 </td>
            </tr>
            <tr>
                <td> d.store(key, value) </td>
                <td> stocke la valeur value à la clé key dans d ou si key existe déjà dans d, met à jour la valeur. Retourne value </td>
            </tr>
            <tr>
                <td> d.shift </td>
                <td> retourne une paire sous la forme d'un tableau [clé, valeur] en l'enlevant de d </td>
            </tr>
        </tbody>
        </table>
        
        <h3 id="dict_delete">Fonctions de suppression</h3>
        
        <table>
        <tbody>
            <tr>
                <th>Fonction </th>
                <th>Description </th>
            </tr>
            <tr>
                <td> d.delete(key) </td>
                <td> enlève la paire correspondant à la clé key</td>
            </tr>
            <tr>
                <td> d.delete(key) { |k| block } </td>
                <td> enlève la paire correspondant à la clé key. Si la clé n'est pas trouvée, retourne le résultat du bloc auquel la clé key est passé en paramètre </td>
            </tr>
            <tr>
                <td> d.clear </td>
                <td> enlève toutes les paires du dictionnaire </td>
            </tr>
            <tr>
                <td> d.delete_if { |key,value| block } </td>
                <td> enlève toutes les paires du dictionnaire pour lequel le bloc, auquel la paire est passée en paramètre, retourne vrai </td>
            </tr>
        </tbody>
        </table>
        
        <h3 id="dict_test">Fonctions de tests et d'information</h3>
        
        <table>
        <tbody>
            <tr>
                <th>Fonction </th>
                <th>Description </th>
            </tr>
            <tr>
                <td> d1 == d2 </td>
                <td> retourne vrai si les deux dictionnaires ont le même nombre de paires et qu'elles sont égales </td>
            </tr>
            <tr>
                <td> d.has_key?(key) <br> d.include?(key) <br> d.key?(key) <br>d.member?(key) </td>
                <td> retourne vrai si le dictionnaire contient une paire avec la clé <em>key</em> </td>
            </tr>
            <tr>
                <td> d.value?(value) <br> d.has_value?(value) </td>
                <td> retourne vrai si le dictionnaire contient une paire avec la valeur <em>value</em> </td>
            </tr>
            <tr>
                <td> d.empty? </td>
                <td> retourne vrai si le dictionnaire ne contient pas de paires </td>
            </tr>
            <tr>
                <td> d.size <br> d.length </td>
                <td> retourne le nombre de paires dans le dictionnaire </td>
            </tr>
            <tr>
                <td> d.default(p = nil) </td>
                <td> retourne la valeur par défaut qui est retournée lorsque l'on tente d'accéder à la valeur d'une clé qui n'existe pas </td> <!-- le paramètre est un mystère -->
            </tr>
            <tr>
                <td> d.keys </td>
                <td> fournit une liste de toutes les clés des paires du dictionnaire </td>
            </tr>
            <tr>
                <td> d.values </td>
                <td> fournit une liste de toutes les valeurs des paires du dictionnaire </td>
            </tr>
        </tbody>
        </table>
        
        <h3 id="dict_others">Autres fonctions principales</h3>
        
        <table>
        <tbody>
            <tr>
                <th>Fonction </th>
                <th>Description </th>
            </tr>
            <tr>
                <td> d.to_a </td>
                <td> retourne un tableau contenant autant de tableaux qu'il y a de paires dans d. Chaque tableau contient deux éléments : en premier la clé et ensuite sa valeur correspondante </td>
            </tr>
            <tr>
                <td> d.to_hash </td>
                <td> retourne le dictionnaire lui-même </td>
            </tr>
            <tr>
                <td> d.inspect <br> d.to_s </td>
                <td> traduit le dictionnaire en une chaîne lisible et la retourne </td>
            </tr>
            <tr>
                <td> d.invert </td>
                <td> renvoi un nouveau dictionnaire où, pour chaque paire (clé, valeur) de d, on aura une paire (valeur, clé) </td>
            </tr>
        </tbody>
        </table>
        
        <p class="back"><a href="#sommaire">Retour sommaire</a></p>

        <!-- --------------------------------------------------------------------------->
        <h2 id="op">9. Opérateurs</h2>
        <!-- --------------------------------------------------------------------------->
        
        <h3 id="op_bin">Opérateurs binaires</h3>
        <table>
        <tbody>
            <tr>
                <th>Type </th>
                <th>Syntaxe </th>
            </tr>
            <tr>
                <td> Arithmétiques </td>
                <td> + - * / % (modulo) ** (puissance)</td>
            </tr>
            <tr>
                <td> Comparaison </td>
                <td> &lt; &lt;= &gt; &gt;= <br>&lt;=&gt; (retourne 0 si égaux, 1 si le premier est le plus grand, -1 sinon)</td>
            </tr>
            <tr>
                <td> Égalité </td>
                <td>  == != <br> === (utilisé dans les clauses case)</td>
            </tr>
            <tr>
                <td> Affectation </td>
                <td> = += -= *= /= %= **= </td>
            </tr>
            <tr>
                <td> Bit à bit </td>
                <td> &amp; | ^ (ou exclusif) ~ (complément) <br> &lt;&lt; &gt;&gt; (décalages gauche et droit)</td>
            </tr>
            <tr>
                <td> Logique </td>
                <td> and or &amp;&amp; ||</td>
            </tr>
            <tr>
                <td> Création d'intervalle </td>
                <td> <em>borne_inf</em>..<em>borne_sup</em> (inclusif) <br> <em>borne_inf</em>...<em>borne_sup</em> (exclusif de borne_sup) </td>
            </tr>
            <tr>
                <td> Appel de méthode </td>
                <td> <em>objet</em>.<em>message</em> </td>
            </tr>
            <tr>
                <td> Accès à une constante définie dans un module ou une classe </td>
                <td> <em>identifiant</em>::<em>constante</em> </td>
            </tr>
        </tbody>
        </table>
        <p>La méthode eql? teste à la fois la valeur et le type des 2 objets comparés. Ainsi <span>2.0 == 2</span> est vrai mais <span>2.0.eql?(2)</span> retournera faux.</p>
        <p>La méthode equal? retourne vrai si et seulement les deux objets ont le même id.</p>
        <p>Ruby permet des affectations parallèles : <span>x, y = 10, 20</span>. Cela est utilise pour échanger la valeur de deux variables sans passer par une troisième : <span>x, y = y, x</span>.
        
        <h3 id="op_una">Opérateurs unaires</h3>
        <table>
        <tbody>
            <tr>
                <th>Type </th>
                <th>Syntaxe </th>
            </tr>
            <tr>
                <td> Mathématique </td>
                <td> + - </td>
            </tr>
            <tr>
                <td> Logique </td>
                <td> ! not </td>
            </tr>
            <tr>
                <td> Définition </td>
                <td> defined? <em>identifiant</em> </td>
            </tr>
            <tr>
                <td> Résolution de portée </td>
                <td> ::<em>identifiant</em> </td>
            </tr>
        </tbody>
        </table>
        <p><span><b>defined?</b></span> retourne <span><b>nil</b></span> si l'identifiant ne correspond à aucune variable, la chaîne "local-variable" s'il correspond à une variable locale, "constant" s'il correspond à une constante, et "global-variable" s'il correspond à une variable globale.</p>
        <p>L'opérateur de résolution de portée sert lorsqu'une constante à l'intérieur d'un module porte le même nom qu'une constante d'une plus grande portée. Pour pouvoir accéder à la constante qui a la portée la plus grande, on la précède de <span>::</span> :</p>
        <div class="code">
            Bonjour = 0<br>
            <b>module</b> Cache<br>
            &nbsp;&nbsp;Bonjour = 22<br>
            &nbsp;&nbsp;puts Bonjour <i># affichera 22</i><br>
            &nbsp;&nbsp;puts ::Bonjour <i># affichera 0</i><br>
            <b>end</b><br>
        </div>
        
        <h3 id="op_ter">Opérateur ternaire</h3>
        <table>
        <tbody>
            <tr>
                <th>Type </th>
                <th>Syntaxe </th>
            </tr>
            <tr>
                <td> Opérateur ternaire </td>
                <td> <em>expression</em> <b>?</b> <em>action si vrai</em> <b>:</b> <em>action si faux</em> </td>
            </tr>
        </tbody>
        </table>
        
        <h3 id="op_precedence">Précédence des opérateurs</h3>
        <p>Voici les opérateurs du plus prioritaire au moins prioritaire (les opérateurs sur la même ligne ont la même précédence) :</p>
        <table>
        <tbody>
            <tr><td>::</td></tr>
            <tr><td>[] []=</td></tr>
            <tr><td>**</td></tr>
            <tr><td>! ~ + (unaire) - (unaire)</td></tr>
            <tr><td>* / %</td></tr>
            <tr><td>+ -</td></tr>
            <tr><td>&gt;&gt; &lt;&lt;</td></tr>
            <tr><td>&amp;</td></tr>
            <tr><td>^ |</td></tr>
            <tr><td>&lt;= &lt; &gt; &gt;=</td></tr>
            <tr><td>&lt;=&gt; == === != =~ !~</td></tr>
            <tr><td>&&</td></tr>
            <tr><td>||</td></tr>
            <tr><td>.. ...</td></tr>
            <tr><td>? : (ternaire)</td></tr>
            <tr><td>= %= { /= -= += |= &= &gt;&gt;= &lt;&lt;= *= &&= ||= **=</td></tr>
            <tr><td><b>defined?</b></td></tr>
            <tr><td><b>not</b></td></tr>
            <tr><td><b>or and</b></td></tr>
        </tbody>
        </table>
        
        <h3 id="op_redef">Redéfinition d'opérateur</h3>
        <p>Les opérateurs ::, [], []=, **, !, ~, +, -, * / %,  >>, <<, &, |, ^, <=, <, >, >=, <=>, ==, ===, !=, =~, !~ sont des fonctions et peuvent donc être redéfinies, changeant ainsi le comportement des opérateurs :</p>
        <div class="code">
          <b>def</b> +(a)<br>
          &nbsp;&nbsp;<i># votre code ici</i><br>
          <b>end</b>
        </div>
        <p>Attention, rappelez vous que a + b et b + a ne sont pas équivalent. Le premier correspond à a.+(b) et le second à b.+(a). Si a et b ne sont pas du même type, vérifiez bien où vous redéfinissez l'opérateur.</p>
        <p>Pour faire la différence entre les opérateurs unaires + et -, lorsque l'on redéfinit ceux-ci il faut employer +@ et -@</p>
        
        <p class="back"><a href="#sommaire">Retour sommaire</a></p>

        <!-- ---------------------------------------------------------------- -->
        <h2 id="flux">10. Contrôle du flux</h2>
        <!-- ---------------------------------------------------------------- -->
        
        <h3 id="seq">Séquence</h3>

        <div class="code">
            action  <i># En Ruby, chaque instruction est une expression évaluable</i>
            action  <i># Il suffit de passer à la ligne pour les faire suivre</i>
        </div>
        <div class="code">
            action ; action  <i># Sur un même ligne, on sépare les actions par un ;</i>
        </div>

        <h3 id="cond">Conditions</h3>
    
        <p>Pour qu'une partie du code ne soit exécuté que si une condition est vrai, on utilisera <span><b>if</b></span> :</p>
        <div class="code">
            <b>if</b> condition [ <b>then</b> ]<br />
            &nbsp;&nbsp; actions<br />
            [ <b>elsif</b> condition [ <b>then</b> ]<br />
            &nbsp;&nbsp; actions ] <b>*</b><br />
            [ <b>else</b><br />
            &nbsp;&nbsp; actions ] <b>?</b><br />
            <b>end</b>
        </div>
        <p>Sont considérées fausses les valeurs <span><b>false</b></span> et <span><b>nil</b></span>. Toutes les autres valeurs sont vraies.</p>
        <p><span><b>if</b></span> peut également s'utiliser en modificateur de ligne ou de bloc :</p>
        <div class="code">
            action <b>if</b> condition<br>
            <br>
            <b>begin</b><br>
            &nbsp;&nbsp;actions<br>
            <b>end</b> <b>if</b> condition
        </div>
        <p>Ruby possède aussi l'instruction <span><b>unless</b></span> qui exécute le bloc qu'elle garde si et seulement la condition est <strong>fause</strong>. On pourrait la traduire par "à moins que" ou "sauf si".</p>
        <div class="code">
            <b>unless</b> condition [ <b>then</b> ]<br />
            &nbsp;&nbsp; actions<br />
            [ <b>else</b><br />
            &nbsp;&nbsp; actions ] <b>?</b><br />
            <b>end</b>
        </div>
        <p><span><b>unless</b></span> peut également s'utiliser en modificateur de ligne ou de bloc :</p>
        <div class="code">
            action <b>unless</b> condition ]<br>
            <br>
            <b>begin</b><br>
            &nbsp;&nbsp;actions<br>
            <b>end</b> <b>unless</b> condition
        </div>
        <p>Ruby possède aussi l'instruction <span><b>case</b></span> qui permet d'exécuter du code en fonction de la valeur d'une expression. Lorsque l'expression qui suit directement le <span><b>case</b></span> est égale à une des expressions spécifiées par le <span><b>when</b></span>, les actions suivantes du <span><b>when</b></span> sont exécutées et <strong>seulement</strong> celles-ci (pas de <em>falling-through</em> à travers les <span><b>when</b></span> suivants comme en C avec "switch").
        <div class="code">
            <b>case</b> expression<br>
            [ <b>when</b> expression [, expression]* [ <b>then</b> ]<br>
            &nbsp;&nbsp;actions ]*<br>
            [ <b>else</b><br>
            &nbsp;&nbsp;actions ]<br>
            <b>end</b>
        </div>
        <p>L'opérateur <span>===</span> est utilisé pour effectuer la comparaison, qui correspond à la méthode équivalente de l'expression utilisé dans le <span><b>when</b></span>.</p>
        <p>Si aucun <span><b>when</b></span> ne correspond, les actions sous le <span><b>else</b></span> sont exécutées.</p>
        
        <h3 id="loop">Répétitions</h3>

        <p>Boucle qui s'exécute <em>tant que</em> la condition est vraie :</p>
        <div class="code">
            <b>while</b> condition [ <b>do</b> ]<br />
            &nbsp;&nbsp; actions<br />
            <b>end</b>
        </div>
        <p><span><b>while</b></span> peut également s'utiliser en modificateur de ligne ou de bloc :</p>
        <div class="code">
            action <b>while</b> condition<br>
            <br>
            <b>begin</b><br>
            &nbsp;&nbsp;actions<br>
            <b>end</b> <b>while</b> condition
        </div>
        <p>Dans ces deux derniers cas, le code est exécuté <strong>au moins une fois</strong> avant l'évaluation de la condition à la manière d'un "do ... while" dans d'autres langages.</p>
        <p>De la même manière que <span><b>unless</b></span> et l'inverse de <span><b>if</b></span>, <span><b>until</b></span> est l'inverse de <span><b>while</b></span> : le code s'exécute tant que la condition est fausse.</p>
        <div class="code">
            <b>until</b> condition [ <b>do</b> ]<br />
            &nbsp;&nbsp; actions<br />
            <b>end</b>
        </div>
        <p><span><b>until</b></span> peut également s'utiliser en modificateur de ligne ou de bloc, et le code sera exécuté également une fois avant la vérification de la condition : </p>
        <div class="code">
            action [ <b>until</b> condition ]<br>
            <br>
            <b>begin</b><br>
            &nbsp;&nbsp;actions<br>
            <b>end</b> <b>until</b> condition
        </div>
        <p>Autre grand classique des boucles, <span><b>for</b></span> :</p>
        <div class="code">
            <b>for</b> identifiant <b>in</b> expression [ <b>do</b> ]<br />
            &nbsp;&nbsp; actions<br />
            <b>end</b>
        </div>
        <p>Pour sauter à la prochaine itération de la boucle la plus interne, il faut utiliser <span><b>next</b></span>.</p>
        <p>Pour quitter la boucle la plus interne, il faut utiliser <span><b>break</b></span>.</p>
        <p>On peut recommencer la dernière itération de la boucle la plus interne, sans vérifier la condition à nouveau néanmoins, avec <span><b>redo</b></span>. Attention aux boucles infinies.</p>
        <p>On peut recommencer totalement l'itération de la boucle la plus interne avec <span><b>retry</b></span>. Cette fonctionnalité a été désactivée depuis Ruby 1.9 et génère à présent une exception de type <span>SyntaxError</span>.</p>
        <div class="code">
            <b>for</b> i <b>in</b> 1..3 <i># lance 3 fois un dé</i><br>
            &nbsp;&nbsp;de = Random.new.rand(1..6)<br>
            &nbsp;&nbsp;puts i, de<br>
            &nbsp;&nbsp;<b>retry if</b> de == 1 <i># recommence tout si on tombe sur 1 (Ruby &lt; 1.9)</i><br>
            &nbsp;&nbsp;<b>redo if</b> de < 4 <i># recommence l'itération si on tombe sur 2 ou 3</i><br>
            <b>end</b>
        </div>
        <p>Ruby propose également des méthodes pour itérer sur un objet :</p>
        <div class="code">
            (1..10).each { |i| actions }<br>
            1.upto(10) { |i| actions }<br>
            10.downto(1) { |i| actions }<br>
            (1..10).step(2) { |i| actions }<br>
            ['a', 'b'].each_with_index { |v, i| actions }<br>
        </div>
        
        <p class="back"><a href="#sommaire">Retour sommaire</a></p>
        
        <!-- ---------------------------------------------------------------- -->
        <h2 id="elem_fun">11. Fonctions</h2>
        <!-- ---------------------------------------------------------------- -->
        
        <h3 id="fun">Fonctions</h3>
        
        <div class="code">
            <p><b>def</b> identifiant [ ( par [, _par_] <b>*</b> ) ]<br />
            &nbsp;&nbsp; actions<br />
            <b>end</b></p>
        </div>
        <div class="code">
            <b>return</b> [ expression ]  <i># Quitte la fonction</i>
        </div>
        <div class="code">
            [ objet <b>.</b> ] identifiant [ ( paramètres ) ]  <i># Appel de fonction</i>
        </div>
        <div class="code">
            * tuple  <i># Fracturation d'un tuple pour passage différents en arguments</i>
        </div>
        <p class="back"><a href="#sommaire">Retour sommaire</a></p>
        
        <!-- ---------------------------------------------------------------- -->
        <h2 id="elem_class">12. Classes et objets</h2>
        <!-- ---------------------------------------------------------------- -->
        
        <h3 id="objet">Type objet</h3>
        <table>
        <tbody>
            <tr>
                <th>Fonction </th>
                <th>Description </th>
            </tr>
            <tr>
                <td> object.method(id) </td>
                <td> renvoie s'il existe un objet Method correspondant à l'id </td>
            </tr>
            <tr>
                <td> identifiant.new </td>
                <td> crée une nouvelle instance </td>
            </tr>
            <tr>
                <td> identifiant.clone </td>
                <td> clone l'objet </td>
            </tr>
            <tr>
                <td> identifiant.is_a? ou kind_of? </td>
                <td> renvoie vrai s'il est de cette classe </td>
            </tr>
            <tr>
                <td> identifiant.class </td>
                <td> donne la classe de l'objet </td>
            </tr>
            <tr>
                <td> identifiant.methods </td>
                <td> liste de chaînes de symboles de toutes les méthodes de l'objet </td>
            </tr>
            <tr>
                <td> identifiant.respond_to? </td>
                <td> l'objet répond-t-il au message ? (= s'il a une méthode correspondante) </td>
            </tr>
        </tbody>
        </table>
        
        <h3 id="cls">Classes</h3>
        
        <div class="code">
            <b>class</b> identifiant [ &lt; parent ]<br>
            &nbsp;&nbsp; actions<br>
            <b>end</b>
        </div>
        <div class="code">
            <b>self</b>  <i># L'instance elle-même</i>
        </div>
        <div class="code">
            <b>super</b>  <i># Pour accéder aux fonctions du parent</i>
        </div>
        <div class="code">
            nom_classe <b>.</b> new [ ( paramètres ) ]  <i>Création d'une instance</i>
        </div> 
        <p class="back"><a href="#sommaire">Retour sommaire</a></p>
        
        <!-- ---------------------------------------------------------------- -->
        <h2 id="elem_mod">13. Modules et fichiers</h2>
        <!-- ---------------------------------------------------------------- -->
        
        <h3 id="mod_mod">Définition d'un module</h3>
        
        <p>Un module en Ruby est un espace de nom dans lequel vous pouvez déclarer des constantes, des fonctions et des classes. De base, des éléments portant le même nom mais déclarés dans des modules différents sont des objets différents.</p>
        <div class="code">
            <b>module</b> identifiant<br>
            &nbsp;&nbsp; actions<br>
            <b>end</b>
        </div>
        <p>Les fonctions de module se déclarent comme les fonctions de classe, en précédant l'identifiant de la fonction par celui du module suivi d'un point : <span><b>def</b> mon_module.ma_fonction</span>.</p>
        
        <h3 id="mod_mod">Inclusion des éléments d'un module</h3>
        
        <p>On peut en Ruby importer tous les éléments définis dans un module dans l'espace de nom courant à l'aide de <span><b>include</b></span> :</p>
        <div class="code">
            <b>include</b> identifiant_module
        </div>
        <p>On aura plus alors à précéder les éléments déclarés dans le module par son nom et :: (pour les constantes) ou . (pour les fonctions).</p>
        <div class="code">
            <b>module</b> Bob<br>
            &nbsp;&nbsp;&nbsp; ConsBob = 6<br>
            <b>end</b><br>
            puts Bob::ConsBob <i># Bob:: est requis</i><br>
            <b>include</B> Bob<br>
            puts ConsBob <i># Plus besoin de Bob::</i><br>
        </div>
        <p>Ruby ne supporte pas l'héritage multiple (le fait pour une classe d'avoir plusieurs classes mères). En incluant un module dans une classe, les instances de cette classe auront accès aux fonctions définies dans le module comme des méthodes d'instance. On appelle cette technique d'émulation de l'héritage multiple des <em>mixins</em>.</p>
        <p>Les fonctions définies dans le module peuvent utiliser des variables d'instance (@) comme si elles avaient été définies dans la classe.</p>
        <div class="code">
            <b>module</b> Mix<br>
            &nbsp;&nbsp;&nbsp; <b>def</b> display<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; puts @val<br>
            &nbsp;&nbsp;&nbsp; <b>end</b><br>
            <b>end</b><br>
            <br>
            <b>class</b> Test<br>
            &nbsp;&nbsp;&nbsp; <b>include</b> Mix<br>
            &nbsp;&nbsp;&nbsp; <b>def</b> initialize(val)<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @val = val<br>
            &nbsp;&nbsp;&nbsp; <b>end</b><br>
            <b>end</b><br>
            <br>
            t = Test.new(55)<br>
            t.display<br>
        </div>
        
        <h3 id="mod_req">Code réparti sur plusieurs fichiers</h3>
        
        <p>Quand on a du code dans plusieurs fichiers, si on veut qu'un fichier A utilise du code du fichier B, il faut utiliser l'instruction <span><b>require</b></span> :</p>
        <div class="code">
            <i># Exige la présence d'un fichier</i><br>
            <b>require</b> "nom_du_fichier" <br>
            <b>require</b> "nom_du_fichier.rb" <br>
            <b>require</b> a <i>#a est convertible en chaîne</i><br>
        </div>
        <p>Si le fichier ne peut pas être chargé, une exception <span>LoadError</span> sera levée.</p>
        <p>Le fichier sera cherché dans tous les dossiers listés dans la variable globale <span>$LOAD_PATH</span>.</p>
        <p>De base, le dossier du script courant <strong>n'est pas</strong> dans <span>$LOAD_PATH</span>, il faut le rajouter manuellement <strong>avant</strong> de faire le <span><b>require</b></span> ainsi : <span>$LOAD_PATH &lt;&lt; '.'</span></p>        
        
        <p class="back"><a href="#sommaire">Retour sommaire</a></p>

        <!-- ---------------------------------------------------------------- -->        
        <h2 id="spe">14. Gestion des exceptions</h2>
        <!-- ---------------------------------------------------------------- -->
        
        <h3 id="exp">Exceptions</h3>
        
        <p>Pour gérer une exception il suffit d'ajouter un ou plusieurs blocs <span>rescue</span> à un bloc <span>begin / end</span>.</p>
        <div class="code">
            <b>begin</b><br>
            &nbsp;&nbsp; actions<br>
            <b>rescue</b> [ identifiant_type [=> identifiant_variable] ]<br>
            &nbsp;&nbsp; actions<br>
            [ <b>else</b>
            &nbsp;&nbsp; actions ]<br>
            [ <b>ensure</b><br>
            &nbsp;&nbsp; actions ]<br>
            <b>end</b>
        </div>
        <p>L'identifiant passé en paramètre du <span><b>rescue</b></span> indique le type d'exception capturée (ainsi que ses sous-classes) par la clause rescue.</p>
        <p>Si l'exception ne correspond pas à un des identifiants attendus par les clauses rescue, le code dans la clause <span><b>else</b></span> sera exécuté.</p>
        <p>La clause <span><b>ensure</b></span>indique du code qui sera toujours exécuté à la fin, qu'il y ait eu une exception ou pas, et même s'il y a un <span><b>return</b></span> dans le bloc initial.</p>
        <p>Pour lever une exception :</p>
        <div class="code">
            <b>raise</b><br>
            <b>raise</b> <em>chaîne</em><br>
            <b>raise</b> <em>Type, chaîne</em>
        </div>
        <p>Le type de base des exceptions dans les cas 1 et 2 est <span>RuntimeError</span>.
        <p>La variable globale <span>$!</span> contient le message de la dernière exception levée ou <span><b>nil</b></span> s'il n'y en avait pas.</p>
        <p>Ruby permet aussi dans une clause <span><b>rescue</b></span> de reprendre l'exécution à partir du begin avec le mot clé <span><b>retry</b></span> :
        <div class="code">
            <b>retry</b>
        </div>
        <p>Attention aux boucles infinies avec <span><b>retry</b></span>! La puissance vient avec son prix !</p>
        
        <h3 id="exp_type">Type d'exceptions</h3>
        <p>Les classes d'exception descendent toutes de <span>Exception</span>. Elle a 7 classes filles : Interrupt, NoMemoryError, SignalException, ScriptError, StandardError, SystemExit. RuntimeError est une classe fille de StandardError.</p>
        <p>On peut bien sûr définir nos propres classes d'exception :</p>
        <div class="code">
            <b>class</b> MonException &lt; StandardError<br>
            &nbsp;&nbsp;<b>def</b> initialize(reason)<br>
            &nbsp;&nbsp;&nbsp;&nbsp;@reason = reason<br>
            &nbsp;&nbsp;<b>end</b><br>
            <b>end</b>
        </div>
        <p>On l'a lèvera en déclarant une nouvelle instance :</p>
        <div class="code">
            <b>raise</b> MonException.new(<em>"motif de l'erreur"</em>)
        </div>
        
        <h3 id="exp_throw">Catch et throw</h3>
        <p>En plus ce que nous venons de voir, Ruby propose un modèle pour dépiler la pile jusqu'à un point précis. On définit déjà une étiquette pour un bloc avec <span><b>catch</b></span>. Si on utilise <span><b>throw</b></span> dans ce bloc ou dans une fonction appelée dans ce bloc, Ruby interrompra l'exécution du bloc, dépilera jusqu'à son début et le sautera.</p>
        <div class="code">
            a = "abc"<br>
            <b>catch</b> :reviens <b>do</b><br>
            &nbsp;&nbsp;a.upcase!<br>
            &nbsp;&nbsp;<b>throw</b> :reviens, 0<br>
            &nbsp;&nbsp;<i># code jamais exécuté</i><br>
            <b>end</b>
        </div>
        <p>Le second paramètre optionnel après le throw est la valeur qui sera retournée (comme toute instruction en Ruby est évaluable, le bloc catch l'est aussi). S'il n'est pas fourni, <span><b>nil</b></span> sera retourné.</p>
        <div class="code">
            <b>throw</b> <em>:symbole</em><br>
            <b>throw</b> <em>"chaîne"</em><br>
            <b>throw</b> <em>:symbole</em>, <em>expression</em><br>
            <b>throw</b> <em>"chaîne"</em>, <em>expression</em>
        </div>
        <p>De même, <span><b>catch</b></span> peut s'utiliser avec un symbole ou une chaîne :</p>
        <div class="code">
            <b>catch</b> <em>:symbole</em><br>
            <b>catch</b> <em>"chaîne"</em><br>
        </div>
        
        <p class="back"><a href="#sommaire">Retour sommaire</a></p>
        
        <!-- ---------------------------------------------------------------- -->
        <h2 id="utiles">15. Utiles</h2>
        <!-- ---------------------------------------------------------------- -->
        
        <div class="code">
            Randow.new.rand(min..max)  <i># Nombres aléatoires (min et max inclus)</i>
        </div>
        
        <p>Sérialisation (<a href="http://ruby-doc.org/core-2.2.0/Marshal.html">doc</a>) :</p>
        <div class="code">
            data = Marshal.dump(o) <i># sérialise dans une chaîne</i><br>
            obj = Marshal.load(data) <i># charge la chaîne</i>
        </div>
        <p class="back"><a href="#sommaire">Retour sommaire</a></p>
    
    </div> <!-- /container -->
    
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../zlib/bootstrap.min.js"></script>
  </body>
</html>