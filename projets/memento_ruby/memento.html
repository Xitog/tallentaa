<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Aide-mémoire Ruby</title>
    <link href="../zlib/simplex.bootstrap.css" rel="stylesheet">
    <style type="text/css">
        
        div.jumbotron p {
            font-family: "Palatino Linotype";
            font-size: 18px; /* de base 20px */
        }
        div.jumbotron p.n {
            text-align: justify;
        }    
        div.jumbotron p.sign {
            text-align: right;
        }
        div.jumbotron h1 {
            color: #CC6714;
            font-family: "Palatino Linotype";
        }
        
        h2 {
            color: #14cc67;
            font-family: "Palatino Linotype";
            font-size: 22px;
            border-bottom: 1px solid #14cc67;
        }
        h3 {
            color: #6714cc;
            font-family: "Palatino Linotype";
            font-size: 18px;
            /*font-style: italic;*/
        }
        
        a {
            color: #6714cc;
        }
        
        table {
            border: 1px solid #AAA;
            border-collapse: collapse; 
            border-spacing: 0;
        }
        th {
            border-bottom: 1px solid #AAA;
        }
        tr:nth-child(odd) {
            background: #DDDDDD;
        }
        
        p.back {
            text-align: center;
        }
        
        div.code {
            background-color: #F9F9F9; /* #efefef; */
            border: 1px solid #AAA;
            padding-left: 3px;
            padding-right: 3px;
            padding-top : 2px;
            padding-bottom : 2px;
            font-family: "Consolas"; 
        }
        
        span {
            background-color: #F9F9F9; /* #efefef; */
            border: 1px solid #AAA;
            padding-left: 3px;
            padding-right: 3px;
            padding-top : 2px;
            padding-bottom : 2px;
            font-family: "Consolas";
        }
        
        strong {
            color: #1479cc;
        }
        /* on utilise b et i uniquement pour le code, strong et em sinon */
        b {
            color: #1479cc;
            font-family: "Consolas";
        }
        i {
            color: #AAA;
        }
        
        span.blue {
            border: 1px solid #9999CC;
            color: #9999CC;
        }
        span.green {
            border: 1px solid #55AA55;
            color: #55AA55;
        }
        span.grey {
            border: 1px solid #AAAAAA;
            color: #111111;
        }
        span.grey , span.green , span.blue {
            font-family: "Consolas";
            font-style: normal;
            font-size: 12px;
            background-color: #F9F9F9;
            padding-left: 2px;
            padding-right: 2px;
        }
        
        b.green {
            color: #55AA55;
        }
        b.blue {
            color: #9999CC;
        }
        b.orange {
            color: #FF6600;
        }
        
    </style>
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
    
    <div id="main" class="container">

        <div class="jumbotron">
            <h1>Aide-mémoire Ruby</h1>
            <hr>
            <p class="n">Une fiche synthétique sur le langage de programmation Ruby pour rafraîchir sa mémoire ou découvrir ce langage si vous connaissez déjà un langage similaire (Python, PHP). Cette fiche n'est pas recommandée pour quelqu'un souhaitant découvrir la programmation.</p>
            <p class="sign">Damien Gouteux</p>
        </div>

        <h2 id="sommaire">Sommaire</h2>
        <ol>
            <li><a href="#bases">Bases</a>
            <ol>
                <li><a href="#bas_aff">Affichage</a></li>
                <li><a href="#bas_key">Mots réservés</a></li>
                <li><a href="#bas_com">Commentaires</a></li>
                <li><a href="#bas_beg">BEGIN et END</a></li>
            </ol></li>
            <li><a href="#sites">Autres ressources</a></li>
            <li><a href="#variables">Variables, constantes et globales</a>
            <ol>
                <li><a href="#var_var">Variables</a></li>
                <li><a href="#var_con">Constantes</a></li>
                <li><a href="#var_glo">Globales</a></li>
                <li><a href="#var_ins">Variables d'instance</a></li>
                <li><a href="#var_cls">Variables de classe</a></li>
                <li><a href="#var_psd">Pseudo-variables</a></li>
            </ol></li>
            <li><a href="#types">Types de base</a>
            <ol>
                <li><a href="#int">Entiers</a></li>
                <li><a href="#float">Réels</a></li>
                <li><a href="#string">Chaînes de caractères</a></li>
                <li><a href="#bool">Booléens</a></li>
                <li><a href="#range">Type intervalle</a></li>
                <li><a href="#void">Type "vide"</a></li>
                <li><a href="#list">Liste</a></li>
                <li><a href="#dict">Dictionnaire</a></li>
                <li><a href="#objet">Objet</a></li>
            </ol></li>
            <li><a href="#op">Opérateurs</a>
            <ol>
                <li><a href="#op_bin">Opérateurs binaires</a></li>
                <li><a href="#op_una">Opérateurs unaires</a></li>
                <li><a href="#op_ter">Opérateur ternaire</a></li>
                <li><a href="#op_precedence">Précédence des opérateurs</a></li>
                <li><a href="#op_redef">Redéfinition d'opérateur</a></li>
            </ol></li>
            <li><a href="#flux">Contrôle du flux</a>
            <ol>
                <li><a href="#seq">Séquence</a></li>
                <li><a href="#cond">Conditions</a></li>
                <li><a href="#loop">Répétitions</a></li>
            </ol></li>
            <li><a href="#elem_fun">Fonctions</a></li>
            <li><a href="#elem_class">Classes</a></li>
            <li><a href="#elem_mod">Modules</a></li>
            <li><a href="#spe">Gestion des exceptions</a>
            <ol>
                <li><a href="#exp">Exceptions</a></li>
                <li><a href="#exp_type">Type d'exceptions</a></li>
                <li><a href="#exp_throw">Catch et throw</a></li>
            </ol></li>
            <li><a href="#utiles">Utiles</a></li>
        </ol>

        <h2 id="bases">1. Bases</h2>

        <p>Date d'apparition du langage : 1995</p>
        <p>Créateur : Yukihiro "Matz" Matsumoto (Japon)</p>
        <p>Version actuelle à la date d'écriture : 2.2.3 (2015)</p>
        <p>Extension d'un fichier Ruby : <span>rb</span></p>
        <p>Exécuter mon_fichier.rb : <span><b>ruby</b> </i>mon_fichier.rb</i></span></p>
        <p>Première ligne d'un fichier sous Linux : <span>#!/usr/bin/ruby</span></p>
        <p>Accéder à la console interactive : <span><b>irb</b></span></p>
        <p>IRb signifie <i>Interactive Ruby</i>.</p>

        <h3 id="bas_aff">Affichage</h3>
        <p>Affichage sur la sortie standard (console) : <span>puts</span>
        <p>Le programme le plus simple en Ruby : <span>puts "Hello World!"</span></p>
        <p>Interprétation de code dans une chaîne : <span> puts "#{a+1}"</span></p>

        <h3 id="bas_key">Mots réservés</h3>
        <p>Mots réservés (39) : BEGIN, END, alias, and, begin, break, case, class, def, defined?, do, else, elsif, end, ensure, false, for, if, in, module, next, nil, not, or, redo, rescue, retry, return, self, super, then, true, undef, unless, until, when, while, __FILE__, __LINE__</p>

        <h3 id="bas_com">Commentaires</h3>
        <p>Commentaires en Ruby : <span><i># mon commentaire jusqu'à la fin de la ligne</i></span></p>
        <p>Commentaires sur plusieurs lignes : <span>=begin <i>vos lignes</i> =end</span></p>

        <h3 id="bas_beg">BEGIN et END</h3>
        <p>Déclarer un bloc de code exécuté avant l'exécution du programme : <span><b>BEGIN</b> { <i>code</i> }</span></p>
        <p>Déclarer un bloc de code exécuté après l'exécution du programme : <span><b>END</b> { <i>code</i> }</span></p>

        <p class="back"><a href="#sommaire">Retour sommaire</a></p>

        <h2 id="sites">2. Autres ressources</h2> 
        <ul>
          <li>Site officiel du langage : <a href="https://www.ruby-lang.org">https://www.ruby-lang.org</a></li>
          <li>Site de la documentation : <a href="http://ruby-doc.org/">http://ruby-doc.org/</a></li>
          <li>Installer Ruby sur Windows : <a href="http://rubyinstaller.org/">http://rubyinstaller.org/</a></li>
          <li>Télécharger le code source de Ruby : <a href="https://www.ruby-lang.org/fr/downloads/">https://www.ruby-lang.org/fr/downloads/</a></li>
          <li>Liste des bibliothèques disponibles : <a href="https://www.ruby-toolbox.com/">https://www.ruby-toolbox.com/</a></li>
          <li>Fiche Wikipédia française : <a href="http://fr.wikipedia.org/wiki/Ruby">http://fr.wikipedia.org/wiki/Ruby</a></li>
          <li>Fiche Wikipédia anglaise : <a href="http://en.wikipedia.org/wiki/Ruby_%28programming_language%29">http://en.wikipedia.org/wiki/Ruby_%28programming_language%29</a></li>
          <li>Console Ruby en ligne : <a href="http://tryruby.org">http://tryruby.org</a></li>
          <li>Une autre console Ruby en ligne : <a href="https://repl.it/languages/ruby">https://repl.it/languages/ruby</a></li>
          <li>Le "Pickaxe", livre de référence sur Ruby : <a href="http://ruby-doc.com/docs/ProgrammingRuby/">Programming Ruby</a></li>
          <li>Livre sur Wikibooks : <a href="https://en.wikibooks.org/wiki/Ruby_Programming">https://en.wikibooks.org/wiki/Ruby_Programming</a></li>
          <li>Site de tutoriels : <a href="http://www.tutorialspoint.com/ruby/">http://www.tutorialspoint.com/ruby/</a></li>
          <li>Ruby Inside, actualités et tutoriels (jusqu'à 2014): <a href="http://www.rubyinside.com/">http://www.rubyinside.com/</a></li>
          <li>Ruby On Rails (RoR), le framework qui a fait connaître Ruby : <a href="http://rubyonrails.org/">http://rubyonrails.org/</a></li>
          <li>Site communautaire français autour de RoR : <a href="http://www.railsfrance.org/">http://www.railsfrance.org/</a></li>
          <li>Site communautaire français autour de Ruby (mort) : <a href="http://www.rubyfrance.org/">http://www.rubyfrance.org/</a></li>
          <li>Ruby Quicktips, des bouts de code utile :<a href="http://rubyquicktips.com/">http://rubyquicktips.com/</a></li>
        </ul>
        <p class="back"><a href="#sommaire">Retour sommaire</a></p>

        <h2 id="variables">3. Variables, constantes et globales</h2>

        <h3 id="var_var">Variables</h3>
        <p>Déclaration d'une variable locale : <span>mon_identifiant = expression</span></p>
        <p>Les caractères autorisés pour constituer mon_identifiant sont les chiffres, les lettres et le caractère souligné _.</p>
        <p>Un identifiant <strong>NE PEUT PAS</strong> commencer par un chiffre néanmoins.</p>
        <p>Un identifiant <strong>NE PEUT PAS</strong> être un des mots réservés.</p>
        <p>Une variable ne durera que jusqu'à la fin de son bloc où elle définit (classe, fonction, module, begin/end {}.</p>

        <h3 id="var_con">Constantes</h3>
        <p>Déclaration d'une constante : <span>Mon_identifiant = expression</span></p>
        <p>En Ruby, une constante commence par une majuscule et <strong>EST</strong> modifiable mais un message d'avertissement sera généré : <br>
        <p><span>warning: already initialized constant Mon_identifiant</span></p>
        <p><span>warning: previous definition of Mon_identifiant was here</span></p>
        <p>Les noms de classe en Ruby doivent être des constantes (et donc commencer par une majuscule).</p>
        <p>La constance en Ruby est une constance de <strong>référence</strong>. Mon_identifiant réfèrera toujours le même objet. Mais cet objet peut-être changé lui. Pour geler l'état d'un objet, il faut utiliser sa méthode <span>freeze</span>.

        <h3 id="var_glo">Globales</h3>
        <p>Déclaration d'une variable globale (elle sera accessible partout) : <span>$mon_identifiant = expression</span></p>

        <h3 id="var_ins">Variables d'instance</h3>
        <p>Une variable d'instance commence par le signe @ : <span>@a</span></p>
        <p>Elles se déclarent dans le corps des méthodes.</p>

        <h3 id="var_cls">Variables de classe</h3>
        <p>Une variable d'instance commence par le signe @@ : <span>@@a</span></p>
        <p>Elle se déclarent dans le corps de la classe.</p>

        <h3 id="var_psd">Pseudo-variables</h3>
        <p>Ce sont des variables fondamentales utilisées par Ruby que l'on ne peut assigner à nouveau :</p>
        <p>Les booléens <span><b>true</b></span> et <span><b>false</b></span>.</p>
        <p>La "valeur vide" : <span><b>nil</b></span>.</p>
        <p>Une référence vers l'objet courant : <span><b>self</b></span>.</p>
        <p>Le nom du fichier courant : <span><b>__FILE__</b></span>.</p>
        <p>Le numéro de la ligne courante : <span><b>__LINE__</b></span>.</p>

        <p class="back"><a href="#sommaire">Retour sommaire</a></p>

        <h2 id="types">4. Types de base</h2>

        <p>Pour chaque type, on présentera son nom et les formes possibles pour ses littéraux. On complétera par une liste de leurs principales méthodes.</p>

        <h3 id="int">Entiers</h3>
        <table>
        <tbody>
            <tr>
                <th>Nom </th>
                <th>Littéral </th>
            </tr>
            <tr>
                <td> Fixnum, Bignum </td>
                <td> 0b1 (binaire)<br>07 (octal)<br>0xf (hexadécimal)<br>10 (décimal)<br>1_000 (1000 en format plus lisible)</td>
            </tr>
        </tbody>
        </table>
        <p>Ruby transforme automatiquement un Fixnum en Bignum quand c'est nécessaire.</p>

        <h3 id="float">Réels</h3>
        <table>
        <tbody>
            <tr>
                <th>Nom </th>
                <th>Littéral </th>
            </tr>
            <tr>
                <td> Float </td>
                <td> 1000.0<br>1E3<br>1.0e8<br> </td>
            </tr>
        </tbody>
        </table>
        <p>Listes des fonctions principales :</p>
        <table>
        <tbody>
            <tr>
                <th>Fonction </th>
                <th>Description </th>
            </tr>
            <tr>
                <td> floor to_s </td>
                <td> entier inférieur immédiat (troncation) </td>
            </tr>
            <tr>
                <td> ceil </td>
                <td> entier supérieur immédiat </td>
            </tr>
            <tr>
                <td> round </td>
                <td> arrondi </td>
            </tr>
        </tbody>
        </table>

        <h3 id="string">Chaînes de caractères</h3>
        <table>
        <tbody>
            <tr>
                <th>Nom </th>
                <th>Littéral </th>
            </tr>
            <tr>
                <td> String </td>
                <td> "abcde"<br>'abcde' </td>
            </tr>
        </tbody>
        </table>
        <p>Les chaînes avec des guillemets doubles interprètent les caractères spéciaux précédés d'un antislash. Les chaînes avec les guillemets simples n'interprètent que les caractères spéciaux <span>\'</span> et <span>\\</span>, produisant ' et \ respectivement. Le caractère spécial le plus utilisé est <span>\n</span> pour faire une nouvelle ligne.</p>
        <p>On peut insérer du code dans n'importe quel chaîne en utilisant <span>#{<i>code</i>}</span>, il sera exécuté une fois à la création de l'objet.</p>
        <p>Listes des fonctions principales :</p>
        <table>
        <tbody>
            <tr>
                <th>Fonction </th>
                <th>Description </th>
            </tr>
            <tr>
                <td> to_s </td>
                <td> produit une chaîne </td>
            </tr>
            <tr>
                <td> equal? </td>
                <td> égalité entre deux chaînes </td>
            </tr>
            <tr>
                <td> size </td>
                <td> longueur de la chaîne </td>
            </tr>
            <tr>
                <td> + </td>
                <td> concaténation de 2 chaînes </td>
            </tr>
            <tr>
                <td> * </td>
                <td> duplique n fois </td>
            </tr>
            <tr>
                <td> upcase </td>
                <td> mise en majuscule </td>
            </tr>
            <tr>
                <td> downcase </td>
                <td> mise en minuscule </td>
            </tr>
            <tr>
                <td> s[i] </td>
                <td> accès au caractère à l'index i </td>
            </tr>
            <tr>
                <td> s[n..m] </td>
                <td> extrait une sous-chaîne </td>
            </tr>
            <tr>
                <td> s[n, longueur] </td>
                <td> extrait une sous-chaîne </td>
            </tr>
            <tr>
                <td> index(s) </td>
                <td> cherche l'index d'une sous-chaîne </td>
            </tr>
            <tr>
                <td> rindex(s) </td>
                <td> cherche l'index d'une sous-chaîne en partant de la fin </td>
            </tr>
        </tbody>
        </table>

        <h3 id="bool">Booléens</h3>
        <table>
        <tbody>
            <tr>
                <th>Nom </th>
                <th>Classe </th>
                <th>Littéral </th>
            </tr>
            <tr>
                <td> Faux </td>
                <td> FalseClass </td>
                <td> <b>false</b> </td>
            </tr>
            <tr>
                <td> Vrai </td>
                <td> TrueClass </td>
                <td> <b>true</b> </td>
            </tr>
        </tbody>
        </table>
        <ul>
            <li>Dans les tests, toutes les valeurs autres que <b>false</b> et <b>nil</b> sont vraies (dont <b>0</b>).</li>
        </ul>

        <h3 id="range">Type intervalle</h3>
        <table>
        <tbody>
            <tr>
                <th>Nom </th>
                <th>Littéral </th>
            </tr>
            <tr>
                <td> Range </td>
                <td> a..b <br> a...b </td>
            </tr>
        </tbody>
        </table>
        <p>Cela produit un intervalle comprenant les valeurs entières de a à b.</p>
        <p>En utilisant trois points, la valeur b est exclue.</p>

        <h3 id="void">Type "vide"</h3>
        <table>
        <tbody>
            <tr>
                <th>Nom </th>
                <th>Classe </th>
                <th>Littéral </th>
            </tr>
            <tr>
                <td> Vide / nul </td>
                <td> NilClass </td>
                <td> <b>nil</b> </td>
            </tr>
        </tbody>
        </table>

        <h3 id="list">Type liste</h3>
        <table>
        <tbody>
            <tr>
                <th>Nom </th>
                <th>Littéral </th>
            </tr>
            <tr>
                <td> Array </td>
                <td> [ 1, 2, 3] <br> 1, 2, 3 <br> %w(abc def) </td>
            </tr>
        </tbody>
        </table>
        <p>Listes des fonctions principales (<a href="http://ruby-doc.org/core-2.2.0/Array.html">Array</a>, <a href="http://ruby-doc.org/core-2.2.0/Enumerable.html">Enumerable</a>) :</p>
        <table>
        <tbody>
            <tr>
                <th>Fonction </th>
                <th>Description </th>
            </tr>
            <tr>
                <td> l[ <em>index</em> ] </td>
                <td> accès à la valeur à l'<em>index</em> </td>
            </tr>
            <tr>
                <td> l[ -1 ] </td>
                <td> accès au dernier élément </td>
            </tr>
            <tr>
                <td> + </td>
                <td> concaténation entre deux listes </td>
            </tr>
            <tr>
                <td> &lt;&lt; </td>
                <td> ajout d'un élément </td>
            </tr>
            <tr>
                <td> insert </td>
                <td> insère à l'index l'élément </td>
            </tr>
            <tr>
                <td> shift </td>
                <td> retourne le premier élément et l'enlève </td>
            </tr>
            <tr>
                <td> pop </td>
                <td> retourne le dernier élément et l'enlève </td>
            </tr>
            <tr>
                <td> member? <b>in</b> include? </td>
                <td> contient l'élément </td>
            </tr>
            <tr>
                <td> any? </td>
                <td> vrai si au moins 1 élément correspond </td>
            </tr>
            <tr>
                <td> all? </td>
                <td> vrai si tous les éléments correspondent </td>
            </tr>
            <tr>
                <td> min </td>
                <td> élément minimal </td>
            </tr>
            <tr>
                <td> max </td>
                <td> élément maximal </td>
            </tr>
            <tr>
                <td> size length </td>
                <td> taille de la liste </td>
            </tr>
            <tr>
                <td> reverse </td>
                <td> donne la liste inversée </td>
            </tr>
            <tr>
                <td> flatten </td>
                <td> si la liste contient des listes, elles seront toutes fusionnées en une seule liste </td>
            </tr>
            <tr>
                <td> slice </td>
                <td> renvoie une partie de la liste </td>
            </tr>
            <tr>
                <td> unshift </td>
                <td> ajoute un ou plusieurs éléments au début de la liste </td>
            </tr>
            <tr>
                <td> push </td>
                <td> ajoute à la fin de la liste </td>
            </tr>
            <tr>
                <td> each </td>
                <td> parcours chaque élément de la liste </td>
            </tr>
            <tr>
                <td> map collect </td>
                <td> invoque le bloc pour chaque élément et collecte le résultat dans une nouvelle liste </td>
            </tr>
            <tr>
                <td> find detect indexOf index search </td>
                <td> Retourne l'index du premier élément pour lequel le bloc est vrai ou qui est égal à la valeur passer en paramètre </td>
            </tr>
            <tr>
                <td> find_all select </td>
                <td> sélectionne tous les éléments selon le résultat d'un bloc </td>
            </tr>
            <tr>
                <td> partition </td>
                <td> partitionne en deux listes selon le résultat d'un bloc </td>
            </tr>
            <tr>
                <td> l.join(s) </td>
                <td> fusionne tous les éléments en y intercalant la chaîne s </td>
            </tr>
            <tr>
                <td> size length </td>
                <td> taille de la liste</td>
            </tr>
            <tr>
                <td> each_with_index </td>
                <td> parcours la liste avec un bloc recevant l'élément et un index </td>
            </tr>
            <tr>
                <td> uniq uniq! </td>
                <td> enlève les éléments en double </td>
            </tr>
            <tr>
                <td> sort! sort_by </td>
                <td> trie la liste </td>
            </tr>
            <tr>
                <td> zip transpose </td>
                <td> combine des listes entres-elles </td>
            </tr>
            <tr>
                <td> assoc </td>
                <td> regarde s'il trouve un élément dans une liste de listes et retourne la liste le contenant si elle existe </td>
            </tr>
            <tr>
                <td> to_a </td>
                <td> renvoie la liste elle-même </td>
            </tr>
            <tr>
                <td> inject </td>
                <td> exécute un bloc sur chaque élément en passant le résultat à l'exécution suivante </td>
            </tr>
        </tbody>
        </table>

        <h3 id="dict">Type dictionnaire</h3>
        <table>
        <tbody>
            <tr>
                <th>Nom </th>
                <th>Littéral </th>
            </tr>
            <tr>
                <td> Hash </td>
                <td> { 1 =&gt; 'a' , 2 =&gt; 'b' , 3 =&gt; 'c' } </td>
            </tr>
        </tbody>
        </table>
        <p>Listes des fonctions principales :</p>
        <table>
        <tbody>
            <tr>
                <th>Fonction </th>
                <th>Description </th>
            </tr>
            <tr>
                <td> h[ <em>key</em> ] ou fetch </td>
                <td> accès à la valeur de la clé <em>key</em> </td>
            </tr>
            <tr>
                <td> has_key? include? key? member? </td>
                <td> test si la clé est définie </td>
            </tr>
            <tr>
                <td> delete </td>
                <td> enlève l'élément avec cette clé </td>
            </tr>
            <tr>
                <td> keys </td>
                <td> liste des clés </td>
            </tr>
            <tr>
                <td> values </td>
                <td> liste des valeurs </td>
            </tr>
            <tr>
                <td> update merge </td>
                <td> ajoute ou change les couples en paramètres </td>
            </tr>
            <tr>
                <td> store(<em>k</em>, <em>v</em>) </td>
                <td> stocke la valeur à la clé </td>
            </tr>
        </tbody>
        </table>
        <p class="back"><a href="#sommaire">Retour sommaire</a></p>

        <h3 id="objet">Type objet</h3>
        <table>
        <tbody>
            <tr>
                <th>Fonction </th>
                <th>Description </th>
            </tr>
            <tr>
                <td> object.method(id) </td>
                <td> renvoie s'il existe un objet Method correspondant à l'id </td>
            </tr>
            <tr>
                <td> identifiant.new </td>
                <td> crée une nouvelle instance </td>
            </tr>
            <tr>
                <td> identifiant.clone </td>
                <td> clone l'objet </td>
            </tr>
            <tr>
                <td> identifiant.is_a? ou kind_of? </td>
                <td> renvoie vrai s'il est de cette classe </td>
            </tr>
            <tr>
                <td> identifiant.class </td>
                <td> donne la classe de l'objet </td>
            </tr>
            <tr>
                <td> identifiant.methods </td>
                <td> liste de chaînes de symboles de toutes les méthodes de l'objet </td>
            </tr>
            <tr>
                <td> identifiant.respond_to? </td>
                <td> l'objet répond-t-il au message ? (= s'il a une méthode correspondante) </td>
            </tr>
        </tbody>
        </table>
        <p class="back"><a href="#sommaire">Retour sommaire</a></p>

        <h2 id="op">5. Opérateurs</h2>

        <h3 id="op_bin">Opérateurs binaires</h3>
        <table>
        <tbody>
            <tr>
                <th>Type </th>
                <th>Syntaxe </th>
            </tr>
            <tr>
                <td> Arithmétiques </td>
                <td> + - * / % (modulo) ** (puissance)</td>
            </tr>
            <tr>
                <td> Comparaison </td>
                <td> &lt; &lt;= &gt; &gt;= <br>&lt;=&gt; (retourne 0 si égaux, 1 si le premier est le plus grand, -1 sinon)</td>
            </tr>
            <tr>
                <td> Égalité </td>
                <td>  == != <br> === (utilisé dans les clauses case)</td>
            </tr>
            <tr>
                <td> Affectation </td>
                <td> = += -= *= /= %= **= </td>
            </tr>
            <tr>
                <td> Bit à bit </td>
                <td> &amp; | ^ (ou exclusif) ~ (complément) <br> &lt;&lt; &gt;&gt; (décalages gauche et droit)</td>
            </tr>
            <tr>
                <td> Logique </td>
                <td> and or &amp;&amp; ||</td>
            </tr>
            <tr>
                <td> Création d'intervalle </td>
                <td> <em>borne_inf</em>..<em>borne_sup</em> (inclusif) <br> <em>borne_inf</em>...<em>borne_sup</em> (exclusif de borne_sup) </td>
            </tr>
            <tr>
                <td> Appel de méthode </td>
                <td> <em>objet</em>.<em>message</em> </td>
            </tr>
            <tr>
                <td> Accès à une constante définie dans un module ou une classe </td>
                <td> <em>identifiant</em>::<em>constante</em> </td>
            </tr>
        </tbody>
        </table>
        <p>La méthode eql? teste à la fois la valeur et le type des 2 objets comparés. Ainsi <span>2.0 == 2</span> est vrai mais <span>2.0.eql?(2)</span> retournera faux.</p>
        <p>La méthode equal? retourne vrai si et seulement les deux objets ont le même id.</p>
        <p>Ruby permet des affectations parallèles : <span>x, y = 10, 20</span>. Cela est utilise pour échanger la valeur de deux variables sans passer par une troisième : <span>x, y = y, x</span>.
        
        <h3 id="op_una">Opérateurs unaires</h3>
        <table>
        <tbody>
            <tr>
                <th>Type </th>
                <th>Syntaxe </th>
            </tr>
            <tr>
                <td> Mathématique </td>
                <td> + - </td>
            </tr>
            <tr>
                <td> Logique </td>
                <td> ! not </td>
            </tr>
            <tr>
                <td> Définition </td>
                <td> defined? <em>identifiant</em> </td>
            </tr>
            <tr>
                <td> Résolution de portée </td>
                <td> ::<em>identifiant</em> </td>
            </tr>
        </tbody>
        </table>
        <p><span><b>defined?</b></span> retourne <span><b>nil</b></span> si l'identifiant ne correspond à aucune variable, la chaîne "local-variable" s'il correspond à une variable locale, "constant" s'il correspond à une constante, et "global-variable" s'il correspond à une variable globale.</p>
        <p>L'opérateur de résolution de portée sert lorsqu'une constante à l'intérieur d'un module porte le même nom qu'une constante d'une plus grande portée. Pour pouvoir accéder à la constante qui a la portée la plus grande, on la précède de <span>::</span> :</p>
        <div class="code">
            Bonjour = 0<br>
            <b>module</b> Cache<br>
            &nbsp;&nbsp;Bonjour = 22<br>
            &nbsp;&nbsp;puts Bonjour <i># affichera 22</i><br>
            &nbsp;&nbsp;puts ::Bonjour <i># affichera 0</i><br>
            <b>end</b><br>
        </div>
        
        <h3 id="op_ter">Opérateur ternaire</h3>
        <table>
        <tbody>
            <tr>
                <th>Type </th>
                <th>Syntaxe </th>
            </tr>
            <tr>
                <td> Opérateur ternaire </td>
                <td> <em>expression</em> <b>?</b> <em>action si vrai</em> <b>:</b> <em>action si faux</em> </td>
            </tr>
        </tbody>
        </table>
        
        <h3 id="op_precedence">Précédence des opérateurs</h3>
        <p>Voici les opérateurs du plus prioritaire au moins prioritaire (les opérateurs sur la même ligne ont la même précédence) :</p>
        <table>
        <tbody>
            <tr><td>::</td></tr>
            <tr><td>[] []=</td></tr>
            <tr><td>**</td></tr>
            <tr><td>! ~ + (unaire) - (unaire)</td></tr>
            <tr><td>* / %</td></tr>
            <tr><td>+ -</td></tr>
            <tr><td>&gt;&gt; &lt;&lt;</td></tr>
            <tr><td>&amp;</td></tr>
            <tr><td>^ |</td></tr>
            <tr><td>&lt;= &lt; &gt; &gt;=</td></tr>
            <tr><td>&lt;=&gt; == === != =~ !~</td></tr>
            <tr><td>&&</td></tr>
            <tr><td>||</td></tr>
            <tr><td>.. ...</td></tr>
            <tr><td>? : (ternaire)</td></tr>
            <tr><td>= %= { /= -= += |= &= &gt;&gt;= &lt;&lt;= *= &&= ||= **=</td></tr>
            <tr><td><b>defined?</b></td></tr>
            <tr><td><b>not</b></td></tr>
            <tr><td><b>or and</b></td></tr>
        </tbody>
        </table>
        
        <h3 id="op_redef">Redéfinition d'opérateur</h3>
        <p>Les opérateurs ::, [], []=, **, !, ~, +, -, * / %,  >>, <<, &, |, ^, <=, <, >, >=, <=>, ==, ===, !=, =~, !~ sont des fonctions et peuvent donc être redéfinies, changeant ainsi le comportement des opérateurs :</p>
        <div class="code">
          <b>def</b> +(a)<br>
          &nbsp;&nbsp;<i># votre code ici</i><br>
          <b>end</b>
        </div>
        <p>Attention, rappelez vous que a + b et b + a ne sont pas équivalent. Le premier correspond à a.+(b) et le second à b.+(a). Si a et b ne sont pas du même type, vérifiez bien où vous redéfinissez l'opérateur.</p>
        <p>Pour faire la différence entre les opérateurs unaires + et -, lorsque l'on redéfinit ceux-ci il faut employer +@ et -@</p>
        
        <p class="back"><a href="#sommaire">Retour sommaire</a></p>
        
        <h2 id="flux">6. Contrôle du flux</h2>

        <h3 id="seq">Séquence</h3>

        <div class="code">
            action  <i># En Ruby, chaque instruction est une expression évaluable</i>
            action  <i># Il suffit de passer à la ligne pour les faire suivre</i>
        </div>
        <div class="code">
            action ; action  <i># Sur un même ligne, on sépare les actions par un ;</i>
        </div>

        <h3 id="cond">Conditions</h3>
    
        <p>Pour qu'une partie du code ne soit exécuté que si une condition est vrai, on utilisera <span><b>if</b></span> :</p>
        <div class="code">
            <b>if</b> condition [ <b>then</b> ]<br />
            &nbsp;&nbsp; actions<br />
            [ <b>elsif</b> condition [ <b>then</b> ]<br />
            &nbsp;&nbsp; actions ] <b>*</b><br />
            [ <b>else</b><br />
            &nbsp;&nbsp; actions ] <b>?</b><br />
            <b>end</b>
        </div>
        <p>Sont considérées fausses les valeurs <span><b>false</b></span> et <span><b>nil</b></span>. Toutes les autres valeurs sont vraies.</p>
        <p><span><b>if</b></span> peut également s'utiliser en modificateur de ligne ou de bloc :</p>
        <div class="code">
            action <b>if</b> condition<br>
            <br>
            <b>begin</b><br>
            &nbsp;&nbsp;actions<br>
            <b>end</b> <b>if</b> condition
        </div>
        <p>Ruby possède aussi l'instruction <span><b>unless</b></span> qui exécute le bloc qu'elle garde si et seulement la condition est <strong>fause</strong>. On pourrait la traduire par "à moins que" ou "sauf si".</p>
        <div class="code">
            <b>unless</b> condition [ <b>then</b> ]<br />
            &nbsp;&nbsp; actions<br />
            [ <b>else</b><br />
            &nbsp;&nbsp; actions ] <b>?</b><br />
            <b>end</b>
        </div>
        <p><span><b>unless</b></span> peut également s'utiliser en modificateur de ligne ou de bloc :</p>
        <div class="code">
            action <b>unless</b> condition ]<br>
            <br>
            <b>begin</b><br>
            &nbsp;&nbsp;actions<br>
            <b>end</b> <b>unless</b> condition
        </div>
        <p>Ruby possède aussi l'instruction <span><b>case</b></span> qui permet d'exécuter du code en fonction de la valeur d'une expression. Lorsque l'expression qui suit directement le <span><b>case</b></span> est égale à une des expressions spécifiées par le <span><b>when</b></span>, les actions suivantes du <span><b>when</b></span> sont exécutées et <strong>seulement</strong> celles-ci (pas de <em>falling-through</em> à travers les <span><b>when</b></span> suivants comme en C avec "switch").
        <div class="code">
            <b>case</b> expression<br>
            [ <b>when</b> expression [, expression]* [ <b>then</b> ]<br>
            &nbsp;&nbsp;actions ]*<br>
            [ <b>else</b><br>
            &nbsp;&nbsp;actions ]<br>
            <b>end</b>
        </div>
        <p>L'opérateur <span>===</span> est utilisé pour effectuer la comparaison, qui correspond à la méthode équivalente de l'expression utilisé dans le <span><b>when</b></span>.</p>
        <p>Si aucun <span><b>when</b></span> ne correspond, les actions sous le <span><b>else</b></span> sont exécutées.</p>
        
        <h3 id="loop">Répétitions</h3>

        <p>Boucle qui s'exécute <em>tant que</em> la condition est vraie :</p>
        <div class="code">
            <b>while</b> condition [ <b>do</b> ]<br />
            &nbsp;&nbsp; actions<br />
            <b>end</b>
        </div>
        <p><span><b>while</b></span> peut également s'utiliser en modificateur de ligne ou de bloc :</p>
        <div class="code">
            action <b>while</b> condition<br>
            <br>
            <b>begin</b><br>
            &nbsp;&nbsp;actions<br>
            <b>end</b> <b>while</b> condition
        </div>
        <p>Dans ces deux derniers cas, le code est exécuté <strong>au moins une fois</strong> avant l'évaluation de la condition à la manière d'un "do ... while" dans d'autres langages.</p>
        <p>De la même manière que <span><b>unless</b></span> et l'inverse de <span><b>if</b></span>, <span><b>until</b></span> est l'inverse de <span><b>while</b></span> : le code s'exécute tant que la condition est fausse.</p>
        <div class="code">
            <b>until</b> condition [ <b>do</b> ]<br />
            &nbsp;&nbsp; actions<br />
            <b>end</b>
        </div>
        <p><span><b>until</b></span> peut également s'utiliser en modificateur de ligne ou de bloc, et le code sera exécuté également une fois avant la vérification de la condition : </p>
        <div class="code">
            action [ <b>until</b> condition ]<br>
            <br>
            <b>begin</b><br>
            &nbsp;&nbsp;actions<br>
            <b>end</b> <b>until</b> condition
        </div>
        <p>Autre grand classique des boucles, <span><b>for</b></span> :</p>
        <div class="code">
            <b>for</b> identifiant <b>in</b> expression [ <b>do</b> ]<br />
            &nbsp;&nbsp; actions<br />
            <b>end</b>
        </div>
        <p>Pour sauter à la prochaine itération de la boucle la plus interne, il faut utiliser <span><b>next</b></span>.</p>
        <p>Pour quitter la boucle la plus interne, il faut utiliser <span><b>break</b></span>.</p>
        <p>On peut recommencer la dernière itération de la boucle la plus interne, sans vérifier la condition à nouveau néanmoins, avec <span><b>redo</b></span>. Attention aux boucles infinies.</p>
        <p>On peut recommencer totalement l'itération de la boucle la plus interne avec <span><b>retry</b></span>. Cette fonctionnalité a été désactivée depuis Ruby 1.9 et génère à présent une exception de type <span>SyntaxError</span>.</p>
        <div class="code">
            <b>for</b> i <b>in</b> 1..3 <i># lance 3 fois un dé</i><br>
            &nbsp;&nbsp;de = Random.new.rand(1..6)<br>
            &nbsp;&nbsp;puts i, de<br>
            &nbsp;&nbsp;<b>retry if</b> de == 1 <i># recommence tout si on tombe sur 1 (Ruby &lt; 1.9)</i><br>
            &nbsp;&nbsp;<b>redo if</b> de < 4 <i># recommence l'itération si on tombe sur 2 ou 3</i><br>
            <b>end</b>
        </div>
        <p>Ruby propose également des méthodes pour itérer sur un objet :</p>
        <div class="code">
            (1..10).each { |i| actions }<br>
            1.upto(10) { |i| actions }<br>
            10.downto(1) { |i| actions }<br>
            (1..10).step(2) { |i| actions }<br>
            ['a', 'b'].each_with_index { |v, i| actions }<br>
        </div>
        
        <p class="back"><a href="#sommaire">Retour sommaire</a></p>
        
        <h2 id="elem_fun">7. Fonctions</h2>
        <h2 id="elem_class">8. Classes</h2>
        <h2 id="elem_mod">9. Modules</h2>
        
        <h3 id="fun">Fonctions</h3>
        
        <div class="code">
            <p><b>def</b> identifiant [ ( par [, _par_] <b>*</b> ) ]<br />
            &nbsp;&nbsp; actions<br />
            <b>end</b></p>
        </div>
        <div class="code">
            <b>return</b> [ expression ]  <i># Quitte la fonction</i>
        </div>
        <div class="code">
            [ objet <b>.</b> ] identifiant [ ( paramètres ) ]  <i># Appel de fonction</i>
        </div>
        <div class="code">
            * tuple  <i># Fracturation d'un tuple pour passage différents en arguments</i>
        </div>

        <h3 id="cls">Classes</h3>
        
        <div class="code">
            <b>class</b> identifiant [ &lt; parent ]<br>
            &nbsp;&nbsp; actions<br>
            <b>end</b>
        </div>
        <div class="code">
            <b>self</b>  <i># L'instance elle-même</i>
        </div>
        <div class="code">
            <b>super</b>  <i># Pour accéder aux fonctions du parent</i>
        </div>
        <div class="code">
            nom_classe <b>.</b> new [ ( paramètres ) ]  <i>Création d'une instance</i>
        </div>
        
        <h3 id="mod">Modules</h3>
        
        <div class="code">
            <b>module</b> identifiant<br>
            &nbsp;&nbsp; actions<br>
            <b>end</b>
        </div>
        <div class="code">
            <b>require</b>  <i># Exige un module</i>
        </div>
        <div class="code">
            <b>include</b>  <i># Inclus les éléments du module dans l'espace de nom actuel</i>
        </div>
        <p class="back"><a href="#sommaire">Retour sommaire</a></p>
        
        <h2 id="spe">10. Gestion des exceptions</h2>

        <h3 id="exp">Exceptions</h3>
        
        <p>Pour gérer une exception il suffit d'ajouter un ou plusieurs blocs <span>rescue</span> à un bloc <span>begin / end</span>.</p>
        <div class="code">
            <b>begin</b><br>
            &nbsp;&nbsp; actions<br>
            <b>rescue</b> [ identifiant_type [=> identifiant_variable] ]<br>
            &nbsp;&nbsp; actions<br>
            [ <b>else</b>
            &nbsp;&nbsp; actions ]<br>
            [ <b>ensure</b><br>
            &nbsp;&nbsp; actions ]<br>
            <b>end</b>
        </div>
        <p>L'identifiant passé en paramètre du <span><b>rescue</b></span> indique le type d'exception capturée (ainsi que ses sous-classes) par la clause rescue.</p>
        <p>Si l'exception ne correspond pas à un des identifiants attendus par les clauses rescue, le code dans la clause <span><b>else</b></span> sera exécuté.</p>
        <p>La clause <span><b>ensure</b></span>indique du code qui sera toujours exécuté à la fin, qu'il y ait eu une exception ou pas, et même s'il y a un <span><b>return</b></span> dans le bloc initial.</p>
        <p>Pour lever une exception :</p>
        <div class="code">
            <b>raise</b><br>
            <b>raise</b> <em>chaîne</em><br>
            <b>raise</b> <em>Type, chaîne</em>
        </div>
        <p>Le type de base des exceptions dans les cas 1 et 2 est <span>RuntimeError</span>.
        <p>La variable globale <span>$!</span> contient le message de la dernière exception levée ou <span><b>nil</b></span> s'il n'y en avait pas.</p>
        <p>Ruby permet aussi dans une clause <span><b>rescue</b></span> de reprendre l'exécution à partir du begin avec le mot clé <span><b>retry</b></span> :
        <div class="code">
            <b>retry</b>
        </div>
        <p>Attention aux boucles infinies avec <span><b>retry</b></span>! La puissance vient avec son prix !</p>
        
        <h3 id="exp_type">Type d'exceptions</h3>
        <p>Les classes d'exception descendent toutes de <span>Exception</span>. Elle a 7 classes filles : Interrupt, NoMemoryError, SignalException, ScriptError, StandardError, SystemExit. RuntimeError est une classe fille de StandardError.</p>
        <p>On peut bien sûr définir nos propres classes d'exception :</p>
        <div class="code">
            <b>class</b> MonException &lt; StandardError<br>
            &nbsp;&nbsp;<b>def</b> initialize(reason)<br>
            &nbsp;&nbsp;&nbsp;&nbsp;@reason = reason<br>
            &nbsp;&nbsp;<b>end</b><br>
            <b>end</b>
        </div>
        <p>On l'a lèvera en déclarant une nouvelle instance :</p>
        <div class="code">
            <b>raise</b> MonException.new(<em>"motif de l'erreur"</em>)
        </div>
        
        <h3 id="exp_throw">Catch et throw</h3>
        <p>En plus ce que nous venons de voir, Ruby propose un modèle pour dépiler la pile jusqu'à un point précis. On définit déjà une étiquette pour un bloc avec <span><b>catch</b></span>. Si on utilise <span><b>throw</b></span> dans ce bloc ou dans une fonction appelée dans ce bloc, Ruby interrompra l'exécution du bloc, dépilera jusqu'à son début et le sautera.</p>
        <div class="code">
            a = "abc"<br>
            <b>catch</b> :reviens <b>do</b><br>
            &nbsp;&nbsp;a.upcase!<br>
            &nbsp;&nbsp;<b>throw</b> :reviens, 0<br>
            &nbsp;&nbsp;<i># code jamais exécuté</i><br>
            <b>end</b>
        </div>
        <p>Le second paramètre optionnel après le throw est la valeur qui sera retournée (comme toute instruction en Ruby est évaluable, le bloc catch l'est aussi). S'il n'est pas fourni, <span><b>nil</b></span> sera retourné.</p>
        <div class="code">
            <b>throw</b> <em>:symbole</em><br>
            <b>throw</b> <em>"chaîne"</em><br>
            <b>throw</b> <em>:symbole</em>, <em>expression</em><br>
            <b>throw</b> <em>"chaîne"</em>, <em>expression</em>
        </div>
        <p>De même, <span><b>catch</b></span> peut s'utiliser avec un symbole ou une chaîne :</p>
        <div class="code">
            <b>catch</b> <em>:symbole</em><br>
            <b>catch</b> <em>"chaîne"</em><br>
        </div>
        
        <p class="back"><a href="#sommaire">Retour sommaire</a></p>
        
        <h2 id="utiles">11. Utiles</h2>

        <div class="code">
            Randow.new.rand(min..max)  <i># Nombres aléatoires (min et max inclus)</i>
        </div>
        
        <p>Sérialisation (<a href="http://ruby-doc.org/core-2.2.0/Marshal.html">doc</a>) :</p>
        <div class="code">
            data = Marshal.dump(o) <i># sérialise dans une chaîne</i><br>
            obj = Marshal.load(data) <i># charge la chaîne</i>
        </div>
        <p class="back"><a href="#sommaire">Retour sommaire</a></p>
    
    </div> <!-- /container -->
    
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../zlib/bootstrap.min.js"></script>
  </body>
</html>